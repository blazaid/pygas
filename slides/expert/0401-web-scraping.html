<!DOCTYPE html><html lang="POSIX"><head><title>Web scraping</title><meta property="og:title" content="Web scraping"><meta name="author" content="Alberto Díaz Álvarez"><meta property="article:author" content="Alberto Díaz Álvarez"><meta name="description" content="¿Qué son los agentes de recolección de información en la Web? Repaso conecptual de cómo funciona la web, bases de estos agentes, conceptos de softbots y principales técnicas y bibliotecas"><meta property="og:description" content="¿Qué son los agentes de recolección de información en la Web? Repaso conecptual de cómo funciona la web, bases de estos agentes, conceptos de softbots y principales técnicas y bibliotecas"><meta name="keywords" content="web scraping,Python,automatización,crawling,scraping"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{appearance:none;background-color:initial;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear;-webkit-tap-highlight-color:transparent}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTAgMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJtMzIgOTAgNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNNDAgNzBIMjBWNTBtMjAgMEwyMCA3MG00MC00MGgyMHYyMG0tMjAgMCAyMC0yMCIgY2xhc3M9ImEiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgeD0iMTAiIHk9IjIwIiBjbGFzcz0iYSIgcng9IjUuNjciLz48cGF0aCBkPSJNMjAgNTBoMjB2MjBtLTIwIDAgMjAtMjBtNDAgMEg2MFYzMG0yMCAwTDYwIDUwIiBjbGFzcz0iYSIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNODcuOCA0Ny41Qzg5IDUwIDg3LjcgNTIgODUgNTJIMzVhOC43IDguNyAwIDAgMS03LjItNC41bC0xNS42LTMxQzExIDE0IDEyLjIgMTIgMTUgMTJoNTBhOC44IDguOCAwIDAgMSA3LjIgNC41ek02MCA1MnYzNm0tMTAgMGgyME00NSA0MmgyMCIvPjwvc3ZnPg==") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-bigger{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODBNNTIgOTBWMTAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button.bespoke-marp-presenter-note-smaller{background:#0000 url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMTIgNTBoODAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}}@keyframes __bespoke_marp_transition_reduced_outgoing__{0%{opacity:1}to{opacity:0}}@keyframes __bespoke_marp_transition_reduced_incoming__{0%{mix-blend-mode:plus-lighter;opacity:0}to{mix-blend-mode:plus-lighter;opacity:1}}.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{::view-transition-group(*){animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-timing-function:ease}::view-transition-new(*),::view-transition-old(*){animation-delay:0s;animation-direction:var(--marp-bespoke-transition-animation-direction,normal);animation-duration:var(--marp-bespoke-transition-animation-duration,.5s);animation-fill-mode:both;animation-name:var(--marp-bespoke-transition-animation-name,var(--marp-bespoke-transition-animation-name-fallback,__bespoke_marp_transition_no_animation__));mix-blend-mode:normal}::view-transition-old(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_outgoing__;animation-timing-function:ease}::view-transition-new(*){--marp-bespoke-transition-animation-name-fallback:__bespoke_marp_transition_reduced_incoming__;animation-timing-function:ease}::view-transition-new(root),::view-transition-old(root){animation-timing-function:linear}::view-transition-new(__bespoke_marp_transition_osc__),::view-transition-old(__bespoke_marp_transition_osc__){animation-duration:0s!important;animation-name:__bespoke_marp_transition_osc__!important}::view-transition-new(__bespoke_marp_transition_osc__){opacity:0!important}.bespoke-marp-transition-warming-up::view-transition-group(*),.bespoke-marp-transition-warming-up::view-transition-new(*),.bespoke-marp-transition-warming-up::view-transition-old(*){animation-play-state:paused!important}body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;opacity:0;pointer-events:none;z-index:-1}svg.bespoke-marp-slide:not(.bespoke-marp-active) *{view-transition-name:none!important}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;opacity:1;pointer-events:auto;z-index:0}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}}@media screen and (prefers-reduced-motion:reduce){svg.bespoke-marp-slide *{view-transition-name:none!important}}@media screen{[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{inset:0;position:absolute}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:#000000a6;border-radius:7px;bottom:50px;color:#fff;contain:paint;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;user-select:none;white-space:nowrap;will-change:transform;z-index:1;view-transition-name:__bespoke_marp_transition_osc__}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{background:#0288d1;flex:0 0 0;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:#0000}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{display:grid;font-family:Helvetica,Arial,sans-serif;grid-template:"current dragbar next" minmax(140px,1fr) "current dragbar note" 2fr "info    dragbar note" 3em;grid-template-columns:minmax(3px,var(--bespoke-marp-presenter-split-ratio,66%)) 0 minmax(3px,1fr);height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container{background:#0288d1;cursor:col-resize;grid-area:dragbar;margin-left:-3px;opacity:0;position:relative;transition:opacity .4s linear .1s;width:6px;z-index:10}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container:hover{opacity:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-dragbar-container.active{opacity:1;transition-delay:0s}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:#0000;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;pointer-events:none;position:absolute;top:20px;-webkit-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note;position:relative;z-index:1}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper{display:block;inset:0;position:absolute}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons{background:#000000a6;border-radius:4px;bottom:0;display:flex;gap:4px;margin:12px;opacity:0;padding:6px;pointer-events:none;position:absolute;right:0;transition:opacity .2s linear}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-buttons:focus-within,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-presenter-note-wrapper:focus-within+.bespoke-marp-presenter-note-buttons,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container:hover .bespoke-marp-presenter-note-buttons{opacity:1;pointer-events:auto}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{box-sizing:border-box;font-size:calc(1.1em*var(--bespoke-marp-note-font-scale, 1));height:calc(100% - 40px);margin:20px;overflow:auto;padding-right:3px;white-space:pre-wrap;width:calc(100% - 40px);word-wrap:break-word;scrollbar-color:#eeeeee80 #0000;scrollbar-width:thin}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:#0000}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:#eeeeee80;border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;overflow:hidden;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{box-sizing:border-box;display:block;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer:hover{cursor:pointer}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>div#\:\$p > svg > foreignObject > section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center;-webkit-text-size-adjust:100%;text-size-adjust:100%}div#\:\$p > svg > foreignObject > section::after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#\:\$p > svg > foreignObject > section:not([data-marpit-pagination])::after{display:none}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){font-size:2em;margin:0.67em 0}div#\:\$p > svg > foreignObject > section video::-webkit-media-controls{will-change:transform}@page {size:1280px 720px;margin:0}@media print{html, body{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#\:\$p > svg > foreignObject > section{page-break-before:always;break-before:page}div#\:\$p > svg > foreignObject > section, div#\:\$p > svg > foreignObject > section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;transition:none!important}div#\:\$p > svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}/*!
 * Marp default theme.
 *
 * @theme default
 * @author Yuki Hattori
 *
 * @auto-scaling true
 * @size 16:9 1280px 720px
 * @size 4:3 960px 720px
 */div#\:\$p > svg > foreignObject > section{--base-size-4:calc(var(--marpit-root-font-size, 1rem) * 0.25);--base-size-8:calc(var(--marpit-root-font-size, 1rem) * 0.5);--base-size-16:calc(var(--marpit-root-font-size, 1rem) * 1);--base-text-weight-normal:400;--base-text-weight-medium:500;--base-text-weight-semibold:600;--fontStack-monospace:ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;}div#\:\$p > svg > foreignObject > section [data-theme=light],div#\:\$p > svg > foreignObject > section{color-scheme:light;--focus-outlineColor:#0969da;--fgColor-default:#1f2328;--fgColor-muted:#636c76;--fgColor-accent:#0969da;--fgColor-success:#1a7f37;--fgColor-attention:#9a6700;--fgColor-danger:#d1242f;--fgColor-done:#8250df;--bgColor-default:#fff;--bgColor-muted:#f6f8fa;--bgColor-neutral-muted:#afb8c133;--bgColor-attention-muted:#fff8c5;--borderColor-default:#d0d7de;--borderColor-muted:#d0d7deb3;--borderColor-neutral-muted:#afb8c133;--borderColor-accent-emphasis:#0969da;--borderColor-success-emphasis:#1a7f37;--borderColor-attention-emphasis:#bf8700;--borderColor-danger-emphasis:#cf222e;--borderColor-done-emphasis:#8250df;--color-prettylights-syntax-comment:#57606a;--color-prettylights-syntax-constant:#0550ae;--color-prettylights-syntax-constant-other-reference-link:#0a3069;--color-prettylights-syntax-entity:#6639ba;--color-prettylights-syntax-storage-modifier-import:#24292f;--color-prettylights-syntax-entity-tag:#0550ae;--color-prettylights-syntax-keyword:#cf222e;--color-prettylights-syntax-string:#0a3069;--color-prettylights-syntax-variable:#953800;--color-prettylights-syntax-brackethighlighter-unmatched:#82071e;--color-prettylights-syntax-brackethighlighter-angle:#57606a;--color-prettylights-syntax-invalid-illegal-text:#f6f8fa;--color-prettylights-syntax-invalid-illegal-bg:#82071e;--color-prettylights-syntax-carriage-return-text:#f6f8fa;--color-prettylights-syntax-carriage-return-bg:#cf222e;--color-prettylights-syntax-string-regexp:#116329;--color-prettylights-syntax-markup-list:#3b2300;--color-prettylights-syntax-markup-heading:#0550ae;--color-prettylights-syntax-markup-italic:#24292f;--color-prettylights-syntax-markup-bold:#24292f;--color-prettylights-syntax-markup-deleted-text:#82071e;--color-prettylights-syntax-markup-deleted-bg:#ffebe9;--color-prettylights-syntax-markup-inserted-text:#116329;--color-prettylights-syntax-markup-inserted-bg:#dafbe1;--color-prettylights-syntax-markup-changed-text:#953800;--color-prettylights-syntax-markup-changed-bg:#ffd8b5;--color-prettylights-syntax-markup-ignored-text:#eaeef2;--color-prettylights-syntax-markup-ignored-bg:#0550ae;--color-prettylights-syntax-meta-diff-range:#8250df;--color-prettylights-syntax-sublimelinter-gutter-mark:#8c959f;}div#\:\$p > svg > foreignObject > section [data-theme=dark],div#\:\$p > svg > foreignObject > section:where(.invert){color-scheme:dark;--focus-outlineColor:#1f6feb;--fgColor-default:#e6edf3;--fgColor-muted:#8d96a0;--fgColor-accent:#4493f8;--fgColor-success:#3fb950;--fgColor-attention:#d29922;--fgColor-danger:#f85149;--fgColor-done:#ab7df8;--bgColor-default:#0d1117;--bgColor-muted:#161b22;--bgColor-neutral-muted:#6e768166;--bgColor-attention-muted:#bb800926;--borderColor-default:#30363d;--borderColor-muted:#30363db3;--borderColor-neutral-muted:#6e768166;--borderColor-accent-emphasis:#1f6feb;--borderColor-success-emphasis:#238636;--borderColor-attention-emphasis:#9e6a03;--borderColor-danger-emphasis:#da3633;--borderColor-done-emphasis:#8957e5;--color-prettylights-syntax-comment:#8b949e;--color-prettylights-syntax-constant:#79c0ff;--color-prettylights-syntax-constant-other-reference-link:#a5d6ff;--color-prettylights-syntax-entity:#d2a8ff;--color-prettylights-syntax-storage-modifier-import:#c9d1d9;--color-prettylights-syntax-entity-tag:#7ee787;--color-prettylights-syntax-keyword:#ff7b72;--color-prettylights-syntax-string:#a5d6ff;--color-prettylights-syntax-variable:#ffa657;--color-prettylights-syntax-brackethighlighter-unmatched:#f85149;--color-prettylights-syntax-brackethighlighter-angle:#8b949e;--color-prettylights-syntax-invalid-illegal-text:#f0f6fc;--color-prettylights-syntax-invalid-illegal-bg:#8e1519;--color-prettylights-syntax-carriage-return-text:#f0f6fc;--color-prettylights-syntax-carriage-return-bg:#b62324;--color-prettylights-syntax-string-regexp:#7ee787;--color-prettylights-syntax-markup-list:#f2cc60;--color-prettylights-syntax-markup-heading:#1f6feb;--color-prettylights-syntax-markup-italic:#c9d1d9;--color-prettylights-syntax-markup-bold:#c9d1d9;--color-prettylights-syntax-markup-deleted-text:#ffdcd7;--color-prettylights-syntax-markup-deleted-bg:#67060c;--color-prettylights-syntax-markup-inserted-text:#aff5b4;--color-prettylights-syntax-markup-inserted-bg:#033a16;--color-prettylights-syntax-markup-changed-text:#ffdfb6;--color-prettylights-syntax-markup-changed-bg:#5a1e02;--color-prettylights-syntax-markup-ignored-text:#c9d1d9;--color-prettylights-syntax-markup-ignored-bg:#1158c7;--color-prettylights-syntax-meta-diff-range:#d2a8ff;--color-prettylights-syntax-sublimelinter-gutter-mark:#484f58;}div#\:\$p > svg > foreignObject > section{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;background-color:var(--bgColor-default);color:var(--fgColor-default);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Noto Sans,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;margin:0;word-wrap:break-word;scroll-behavior:auto}div#\:\$p > svg > foreignObject > section{--marpit-root-font-size:16px;}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1):hover .anchor .octicon-link:before,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2):hover .anchor .octicon-link:before,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3):hover .anchor .octicon-link:before,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4):hover .anchor .octicon-link:before,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5):hover .anchor .octicon-link:before,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6):hover .anchor .octicon-link:before{background-color:currentColor;content:" ";display:inline-block;height:16px;-webkit-mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0"/></svg>');mask-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0"/></svg>');width:16px}div#\:\$p > svg > foreignObject > section details,div#\:\$p > svg > foreignObject > section figcaption,div#\:\$p > svg > foreignObject > section figure{display:block}div#\:\$p > svg > foreignObject > section summary{display:list-item}div#\:\$p > svg > foreignObject > section [hidden]{display:none!important}div#\:\$p > svg > foreignObject > section a{background-color:transparent;color:var(--fgColor-accent);text-decoration:none}div#\:\$p > svg > foreignObject > section abbr[title]{border-bottom:none;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}div#\:\$p > svg > foreignObject > section b,div#\:\$p > svg > foreignObject > section strong{font-weight:var(--base-text-weight-semibold, 600)}div#\:\$p > svg > foreignObject > section dfn{font-style:italic}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){border-bottom:1px solid var(--borderColor-muted);font-size:2em;font-weight:var(--base-text-weight-semibold, 600);margin:.67em 0;padding-bottom:.3em}div#\:\$p > svg > foreignObject > section mark{background-color:var(--bgColor-attention-muted);color:var(--fgColor-default)}div#\:\$p > svg > foreignObject > section small{font-size:90%}div#\:\$p > svg > foreignObject > section sub,div#\:\$p > svg > foreignObject > section sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}div#\:\$p > svg > foreignObject > section sub{bottom:-.25em}div#\:\$p > svg > foreignObject > section sup{top:-.5em}div#\:\$p > svg > foreignObject > section img{background-color:var(--bgColor-default);border-style:none;box-sizing:content-box;max-width:100%}div#\:\$p > svg > foreignObject > section code,div#\:\$p > svg > foreignObject > section kbd,div#\:\$p > svg > foreignObject > section :is(pre, marp-pre),div#\:\$p > svg > foreignObject > section samp{font-family:monospace;font-size:1em}div#\:\$p > svg > foreignObject > section figure{margin:1em 40px}div#\:\$p > svg > foreignObject > section hr{background:transparent;background-color:var(--borderColor-default);border:0;box-sizing:content-box;height:.25em;margin:24px 0;overflow:hidden;padding:0}div#\:\$p > svg > foreignObject > section input{font:inherit;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible}div#\:\$p > svg > foreignObject > section [type=button],div#\:\$p > svg > foreignObject > section [type=reset],div#\:\$p > svg > foreignObject > section [type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button}div#\:\$p > svg > foreignObject > section [type=checkbox],div#\:\$p > svg > foreignObject > section [type=radio]{box-sizing:border-box;padding:0}div#\:\$p > svg > foreignObject > section [type=number]::-webkit-inner-spin-button,div#\:\$p > svg > foreignObject > section [type=number]::-webkit-outer-spin-button{height:auto}div#\:\$p > svg > foreignObject > section [type=search]::-webkit-search-cancel-button,div#\:\$p > svg > foreignObject > section [type=search]::-webkit-search-decoration{-webkit-appearance:none;appearance:none}div#\:\$p > svg > foreignObject > section ::-webkit-input-placeholder{color:inherit;opacity:.54}div#\:\$p > svg > foreignObject > section ::-webkit-file-upload-button{-webkit-appearance:button;appearance:button;font:inherit}div#\:\$p > svg > foreignObject > section a:hover{text-decoration:underline}div#\:\$p > svg > foreignObject > section ::-moz-placeholder{color:var(--fgColor-muted);opacity:1}div#\:\$p > svg > foreignObject > section ::placeholder{color:var(--fgColor-muted);opacity:1}div#\:\$p > svg > foreignObject > section hr:after,div#\:\$p > svg > foreignObject > section hr:before{content:"";display:table}div#\:\$p > svg > foreignObject > section hr:after{clear:both}div#\:\$p > svg > foreignObject > section table{border-collapse:collapse;border-spacing:0;display:block;max-width:100%;overflow:auto;width:-moz-max-content;width:max-content}div#\:\$p > svg > foreignObject > section td,div#\:\$p > svg > foreignObject > section th{padding:0}div#\:\$p > svg > foreignObject > section details summary{cursor:pointer}div#\:\$p > svg > foreignObject > section details:not([open])>:not(summary){display:none}div#\:\$p > svg > foreignObject > section [role=button]:focus,div#\:\$p > svg > foreignObject > section a:focus,div#\:\$p > svg > foreignObject > section input[type=checkbox]:focus,div#\:\$p > svg > foreignObject > section input[type=radio]:focus{box-shadow:none;outline:2px solid var(--focus-outlineColor);outline-offset:-2px}div#\:\$p > svg > foreignObject > section [role=button]:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section a:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section input[type=checkbox]:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section input[type=radio]:focus:not(:focus-visible){outline:1px solid transparent}div#\:\$p > svg > foreignObject > section [role=button]:focus-visible,div#\:\$p > svg > foreignObject > section a:focus-visible,div#\:\$p > svg > foreignObject > section input[type=checkbox]:focus-visible,div#\:\$p > svg > foreignObject > section input[type=radio]:focus-visible{box-shadow:none;outline:2px solid var(--focus-outlineColor);outline-offset:-2px}div#\:\$p > svg > foreignObject > section a:not([class]):focus,div#\:\$p > svg > foreignObject > section a:not([class]):focus-visible,div#\:\$p > svg > foreignObject > section input[type=checkbox]:focus,div#\:\$p > svg > foreignObject > section input[type=checkbox]:focus-visible,div#\:\$p > svg > foreignObject > section input[type=radio]:focus,div#\:\$p > svg > foreignObject > section input[type=radio]:focus-visible{outline-offset:0}div#\:\$p > svg > foreignObject > section kbd{background-color:var(--bgColor-muted);border-bottom-color:var(--borderColor-neutral-muted);border:1px solid var(--borderColor-neutral-muted);border-radius:6px;box-shadow:inset 0 -1px 0 var(--borderColor-neutral-muted);color:var(--fgColor-default);display:inline-block;font:11px var(--fontStack-monospace, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace);line-height:10px;padding:3px 5px;vertical-align:middle}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section :is(h2, marp-h2),div#\:\$p > svg > foreignObject > section :is(h3, marp-h3),div#\:\$p > svg > foreignObject > section :is(h4, marp-h4),div#\:\$p > svg > foreignObject > section :is(h5, marp-h5),div#\:\$p > svg > foreignObject > section :is(h6, marp-h6){font-weight:var(--base-text-weight-semibold, 600);line-height:1.25;margin-bottom:16px;margin-top:24px}div#\:\$p > svg > foreignObject > section :is(h2, marp-h2){border-bottom:1px solid var(--borderColor-muted);font-size:1.5em;padding-bottom:.3em}div#\:\$p > svg > foreignObject > section :is(h2, marp-h2),div#\:\$p > svg > foreignObject > section :is(h3, marp-h3){font-weight:var(--base-text-weight-semibold, 600)}div#\:\$p > svg > foreignObject > section :is(h3, marp-h3){font-size:1.25em}div#\:\$p > svg > foreignObject > section :is(h4, marp-h4){font-size:1em}div#\:\$p > svg > foreignObject > section :is(h4, marp-h4),div#\:\$p > svg > foreignObject > section :is(h5, marp-h5){font-weight:var(--base-text-weight-semibold, 600)}div#\:\$p > svg > foreignObject > section :is(h5, marp-h5){font-size:.875em}div#\:\$p > svg > foreignObject > section :is(h6, marp-h6){color:var(--fgColor-muted);font-size:.85em;font-weight:var(--base-text-weight-semibold, 600)}div#\:\$p > svg > foreignObject > section p{margin-bottom:10px;margin-top:0}div#\:\$p > svg > foreignObject > section blockquote{border-left:.25em solid var(--borderColor-default);color:var(--fgColor-muted);margin:0;padding:0 1em}div#\:\$p > svg > foreignObject > section ol,div#\:\$p > svg > foreignObject > section ul{margin-bottom:0;margin-top:0;padding-left:2em}div#\:\$p > svg > foreignObject > section ol ol,div#\:\$p > svg > foreignObject > section ul ol{list-style-type:lower-roman}div#\:\$p > svg > foreignObject > section ol ol ol,div#\:\$p > svg > foreignObject > section ol ul ol,div#\:\$p > svg > foreignObject > section ul ol ol,div#\:\$p > svg > foreignObject > section ul ul ol{list-style-type:lower-alpha}div#\:\$p > svg > foreignObject > section dd{margin-left:0}div#\:\$p > svg > foreignObject > section code,div#\:\$p > svg > foreignObject > section :is(pre, marp-pre),div#\:\$p > svg > foreignObject > section samp,div#\:\$p > svg > foreignObject > section tt{font-family:var(--fontStack-monospace, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace);font-size:12px}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre){margin-bottom:0;margin-top:0;word-wrap:normal}div#\:\$p > svg > foreignObject > section .octicon{display:inline-block;overflow:visible!important;vertical-align:text-bottom;fill:currentColor}div#\:\$p > svg > foreignObject > section input::-webkit-inner-spin-button,div#\:\$p > svg > foreignObject > section input::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}div#\:\$p > svg > foreignObject > section .mr-2{margin-right:var(--base-size-8, 8px)!important}div#\:\$p > svg > foreignObject > section:after,div#\:\$p > svg > foreignObject > section:before{display:table}div#\:\$p > svg > foreignObject > section:after{clear:both}div#\:\$p > svg > foreignObject > section>:first-child{margin-top:0!important}div#\:\$p > svg > foreignObject > section>:last-child{margin-bottom:0!important}div#\:\$p > svg > foreignObject > section a:not([href]){color:inherit;text-decoration:none}div#\:\$p > svg > foreignObject > section .absent{color:var(--fgColor-danger)}div#\:\$p > svg > foreignObject > section .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}div#\:\$p > svg > foreignObject > section .anchor:focus{outline:none}div#\:\$p > svg > foreignObject > section blockquote,div#\:\$p > svg > foreignObject > section details,div#\:\$p > svg > foreignObject > section dl,div#\:\$p > svg > foreignObject > section ol,div#\:\$p > svg > foreignObject > section p,div#\:\$p > svg > foreignObject > section :is(pre, marp-pre),div#\:\$p > svg > foreignObject > section table,div#\:\$p > svg > foreignObject > section ul{margin-bottom:16px;margin-top:0}div#\:\$p > svg > foreignObject > section blockquote>:first-child{margin-top:0}div#\:\$p > svg > foreignObject > section blockquote>:last-child{margin-bottom:0}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) .octicon-link,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) .octicon-link,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) .octicon-link,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4) .octicon-link,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5) .octicon-link,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6) .octicon-link{color:var(--fgColor-default);vertical-align:middle;visibility:hidden}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1):hover .anchor,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2):hover .anchor,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3):hover .anchor,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4):hover .anchor,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5):hover .anchor,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6):hover .anchor{text-decoration:none}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1):hover .anchor .octicon-link,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2):hover .anchor .octicon-link,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3):hover .anchor .octicon-link,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4):hover .anchor .octicon-link,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5):hover .anchor .octicon-link,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6):hover .anchor .octicon-link{visibility:visible}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) code,div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) tt,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) code,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) tt,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) code,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) tt,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4) code,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4) tt,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5) code,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5) tt,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6) code,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6) tt{font-size:inherit;padding:0 .2em}div#\:\$p > svg > foreignObject > section summary :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section summary :is(h2, marp-h2),div#\:\$p > svg > foreignObject > section summary :is(h3, marp-h3),div#\:\$p > svg > foreignObject > section summary :is(h4, marp-h4),div#\:\$p > svg > foreignObject > section summary :is(h5, marp-h5),div#\:\$p > svg > foreignObject > section summary :is(h6, marp-h6){display:inline-block}div#\:\$p > svg > foreignObject > section summary :is(h1, marp-h1) .anchor,div#\:\$p > svg > foreignObject > section summary :is(h2, marp-h2) .anchor,div#\:\$p > svg > foreignObject > section summary :is(h3, marp-h3) .anchor,div#\:\$p > svg > foreignObject > section summary :is(h4, marp-h4) .anchor,div#\:\$p > svg > foreignObject > section summary :is(h5, marp-h5) .anchor,div#\:\$p > svg > foreignObject > section summary :is(h6, marp-h6) .anchor{margin-left:-40px}div#\:\$p > svg > foreignObject > section summary :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section summary :is(h2, marp-h2){border-bottom:0;padding-bottom:0}div#\:\$p > svg > foreignObject > section ol.no-list,div#\:\$p > svg > foreignObject > section ul.no-list{list-style-type:none;padding:0}div#\:\$p > svg > foreignObject > section ol[type="a s"]{list-style-type:lower-alpha}div#\:\$p > svg > foreignObject > section ol[type="A s"]{list-style-type:upper-alpha}div#\:\$p > svg > foreignObject > section ol[type="i s"]{list-style-type:lower-roman}div#\:\$p > svg > foreignObject > section ol[type="I s"]{list-style-type:upper-roman}div#\:\$p > svg > foreignObject > section div>ol:not([type]),div#\:\$p > svg > foreignObject > section ol[type="1"]{list-style-type:decimal}div#\:\$p > svg > foreignObject > section ol ol,div#\:\$p > svg > foreignObject > section ol ul,div#\:\$p > svg > foreignObject > section ul ol,div#\:\$p > svg > foreignObject > section ul ul{margin-bottom:0;margin-top:0}div#\:\$p > svg > foreignObject > section li>p{margin-top:16px}div#\:\$p > svg > foreignObject > section li+li{margin-top:.25em}div#\:\$p > svg > foreignObject > section dl{padding:0}div#\:\$p > svg > foreignObject > section dl dt{font-size:1em;font-style:italic;font-weight:var(--base-text-weight-semibold, 600);margin-top:16px;padding:0}div#\:\$p > svg > foreignObject > section dl dd{margin-bottom:16px;padding:0 16px}div#\:\$p > svg > foreignObject > section table th{font-weight:var(--base-text-weight-semibold, 600)}div#\:\$p > svg > foreignObject > section table td,div#\:\$p > svg > foreignObject > section table th{border:1px solid var(--borderColor-default);padding:6px 13px}div#\:\$p > svg > foreignObject > section table td>:last-child{margin-bottom:0}div#\:\$p > svg > foreignObject > section table tr{background-color:var(--bgColor-default);border-top:1px solid var(--borderColor-muted)}div#\:\$p > svg > foreignObject > section table tr:nth-child(2n){background-color:var(--bgColor-muted)}div#\:\$p > svg > foreignObject > section table img{background-color:transparent}div#\:\$p > svg > foreignObject > section img[align=right]{padding-left:20px}div#\:\$p > svg > foreignObject > section img[align=left]{padding-right:20px}div#\:\$p > svg > foreignObject > section .emoji{background-color:transparent;max-width:none;vertical-align:text-top}div#\:\$p > svg > foreignObject > section :is(span, marp-span).frame,div#\:\$p > svg > foreignObject > section :is(span, marp-span).frame>:is(span, marp-span){display:block;overflow:hidden}div#\:\$p > svg > foreignObject > section :is(span, marp-span).frame>:is(span, marp-span){border:1px solid var(--borderColor-default);float:left;margin:13px 0 0;padding:7px;width:auto}div#\:\$p > svg > foreignObject > section :is(span, marp-span).frame :is(span, marp-span) img{display:block;float:left}div#\:\$p > svg > foreignObject > section :is(span, marp-span).frame :is(span, marp-span) :is(span, marp-span){clear:both;color:var(--fgColor-default);display:block;padding:5px 0 0}div#\:\$p > svg > foreignObject > section :is(span, marp-span).align-center{clear:both;display:block;overflow:hidden}div#\:\$p > svg > foreignObject > section :is(span, marp-span).align-center>:is(span, marp-span){display:block;margin:13px auto 0;overflow:hidden;text-align:center}div#\:\$p > svg > foreignObject > section :is(span, marp-span).align-center :is(span, marp-span) img{margin:0 auto;text-align:center}div#\:\$p > svg > foreignObject > section :is(span, marp-span).align-right{clear:both;display:block;overflow:hidden}div#\:\$p > svg > foreignObject > section :is(span, marp-span).align-right>:is(span, marp-span){display:block;margin:13px 0 0;overflow:hidden;text-align:right}div#\:\$p > svg > foreignObject > section :is(span, marp-span).align-right :is(span, marp-span) img{margin:0;text-align:right}div#\:\$p > svg > foreignObject > section :is(span, marp-span).float-left{display:block;float:left;margin-right:13px;overflow:hidden}div#\:\$p > svg > foreignObject > section :is(span, marp-span).float-left :is(span, marp-span){margin:13px 0 0}div#\:\$p > svg > foreignObject > section :is(span, marp-span).float-right{display:block;float:right;margin-left:13px;overflow:hidden}div#\:\$p > svg > foreignObject > section :is(span, marp-span).float-right>:is(span, marp-span){display:block;margin:13px auto 0;overflow:hidden;text-align:right}div#\:\$p > svg > foreignObject > section code,div#\:\$p > svg > foreignObject > section tt{background-color:var(--bgColor-neutral-muted);border-radius:6px;font-size:85%;margin:0;padding:.2em .4em;white-space:break-spaces}div#\:\$p > svg > foreignObject > section code br,div#\:\$p > svg > foreignObject > section tt br{display:none}div#\:\$p > svg > foreignObject > section del code{text-decoration:inherit}div#\:\$p > svg > foreignObject > section samp{font-size:85%}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) code{font-size:100%}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre)>code{background:transparent;border:0;margin:0;padding:0;white-space:pre;word-break:normal}div#\:\$p > svg > foreignObject > section .highlight{margin-bottom:16px}div#\:\$p > svg > foreignObject > section .highlight :is(pre, marp-pre){margin-bottom:0;word-break:normal}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre){background-color:var(--bgColor-muted);border-radius:6px;color:var(--fgColor-default);font-size:85%;line-height:1.45;overflow:auto;padding:16px}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) code,div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) tt{display:inline;line-height:inherit;margin:0;max-width:auto;overflow:visible;padding:0;word-wrap:normal;background-color:transparent;border:0}div#\:\$p > svg > foreignObject > section .csv-data td,div#\:\$p > svg > foreignObject > section .csv-data th{font-size:12px;line-height:1;overflow:hidden;padding:5px;text-align:left;white-space:nowrap}div#\:\$p > svg > foreignObject > section .csv-data .blob-num{background:var(--bgColor-default);border:0;padding:10px 8px 9px;text-align:right}div#\:\$p > svg > foreignObject > section .csv-data tr{border-top:0}div#\:\$p > svg > foreignObject > section .csv-data th{background:var(--bgColor-muted);border-top:0;font-weight:var(--base-text-weight-semibold, 600)}div#\:\$p > svg > foreignObject > section [data-footnote-ref]:before{content:"["}div#\:\$p > svg > foreignObject > section [data-footnote-ref]:after{content:"]"}div#\:\$p > svg > foreignObject > section .footnotes{border-top:1px solid var(--borderColor-default);color:var(--fgColor-muted);font-size:12px}div#\:\$p > svg > foreignObject > section div#\:\$p > svg > foreignObject > section section.footnotes{--marpit-root-font-size:12px;}div#\:\$p > svg > foreignObject > section .footnotes ol{padding-left:16px}div#\:\$p > svg > foreignObject > section .footnotes ol ul{display:inline-block;margin-top:16px;padding-left:16px}div#\:\$p > svg > foreignObject > section .footnotes li{position:relative}div#\:\$p > svg > foreignObject > section .footnotes li:target:before{border:2px solid var(--borderColor-accent-emphasis);border-radius:6px;bottom:-8px;content:"";left:-24px;pointer-events:none;position:absolute;right:-8px;top:-8px}div#\:\$p > svg > foreignObject > section .footnotes li:target{color:var(--fgColor-default)}div#\:\$p > svg > foreignObject > section .footnotes .data-footnote-backref g-emoji{font-family:monospace}div#\:\$p > svg > foreignObject > section .pl-c{color:var(--color-prettylights-syntax-comment)}div#\:\$p > svg > foreignObject > section .pl-c1,div#\:\$p > svg > foreignObject > section .pl-s .pl-v{color:var(--color-prettylights-syntax-constant)}div#\:\$p > svg > foreignObject > section .pl-e,div#\:\$p > svg > foreignObject > section .pl-en{color:var(--color-prettylights-syntax-entity)}div#\:\$p > svg > foreignObject > section .pl-s .pl-s1,div#\:\$p > svg > foreignObject > section .pl-smi{color:var(--color-prettylights-syntax-storage-modifier-import)}div#\:\$p > svg > foreignObject > section .pl-ent{color:var(--color-prettylights-syntax-entity-tag)}div#\:\$p > svg > foreignObject > section .pl-k{color:var(--color-prettylights-syntax-keyword)}div#\:\$p > svg > foreignObject > section .pl-pds,div#\:\$p > svg > foreignObject > section .pl-s,div#\:\$p > svg > foreignObject > section .pl-s .pl-pse .pl-s1,div#\:\$p > svg > foreignObject > section .pl-sr,div#\:\$p > svg > foreignObject > section .pl-sr .pl-cce,div#\:\$p > svg > foreignObject > section .pl-sr .pl-sra,div#\:\$p > svg > foreignObject > section .pl-sr .pl-sre{color:var(--color-prettylights-syntax-string)}div#\:\$p > svg > foreignObject > section .pl-smw,div#\:\$p > svg > foreignObject > section .pl-v{color:var(--color-prettylights-syntax-variable)}div#\:\$p > svg > foreignObject > section .pl-bu{color:var(--color-prettylights-syntax-brackethighlighter-unmatched)}div#\:\$p > svg > foreignObject > section .pl-ii{background-color:var(--color-prettylights-syntax-invalid-illegal-bg);color:var(--color-prettylights-syntax-invalid-illegal-text)}div#\:\$p > svg > foreignObject > section .pl-c2{background-color:var(--color-prettylights-syntax-carriage-return-bg);color:var(--color-prettylights-syntax-carriage-return-text)}div#\:\$p > svg > foreignObject > section .pl-sr .pl-cce{color:var(--color-prettylights-syntax-string-regexp);font-weight:700}div#\:\$p > svg > foreignObject > section .pl-ml{color:var(--color-prettylights-syntax-markup-list)}div#\:\$p > svg > foreignObject > section .pl-mh,div#\:\$p > svg > foreignObject > section .pl-mh .pl-en,div#\:\$p > svg > foreignObject > section .pl-ms{color:var(--color-prettylights-syntax-markup-heading);font-weight:700}div#\:\$p > svg > foreignObject > section .pl-mi{color:var(--color-prettylights-syntax-markup-italic);font-style:italic}div#\:\$p > svg > foreignObject > section .pl-mb{color:var(--color-prettylights-syntax-markup-bold);font-weight:700}div#\:\$p > svg > foreignObject > section .pl-md{background-color:var(--color-prettylights-syntax-markup-deleted-bg);color:var(--color-prettylights-syntax-markup-deleted-text)}div#\:\$p > svg > foreignObject > section .pl-mi1{background-color:var(--color-prettylights-syntax-markup-inserted-bg);color:var(--color-prettylights-syntax-markup-inserted-text)}div#\:\$p > svg > foreignObject > section .pl-mc{background-color:var(--color-prettylights-syntax-markup-changed-bg);color:var(--color-prettylights-syntax-markup-changed-text)}div#\:\$p > svg > foreignObject > section .pl-mi2{background-color:var(--color-prettylights-syntax-markup-ignored-bg);color:var(--color-prettylights-syntax-markup-ignored-text)}div#\:\$p > svg > foreignObject > section .pl-mdr{color:var(--color-prettylights-syntax-meta-diff-range);font-weight:700}div#\:\$p > svg > foreignObject > section .pl-ba{color:var(--color-prettylights-syntax-brackethighlighter-angle)}div#\:\$p > svg > foreignObject > section .pl-sg{color:var(--color-prettylights-syntax-sublimelinter-gutter-mark)}div#\:\$p > svg > foreignObject > section .pl-corl{color:var(--color-prettylights-syntax-constant-other-reference-link);text-decoration:underline}div#\:\$p > svg > foreignObject > section [role=button]:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section [role=tabpanel][tabindex="0"]:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section a:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section button:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section summary:focus:not(:focus-visible){box-shadow:none;outline:none}div#\:\$p > svg > foreignObject > section [tabindex="0"]:focus:not(:focus-visible),div#\:\$p > svg > foreignObject > section details-dialog:focus:not(:focus-visible){outline:none}div#\:\$p > svg > foreignObject > section g-emoji{display:inline-block;font-family:Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:1em;font-style:normal!important;font-weight:var(--base-text-weight-normal, 400);line-height:1;min-width:1ch;vertical-align:-.075em}div#\:\$p > svg > foreignObject > section g-emoji img{height:1em;width:1em}div#\:\$p > svg > foreignObject > section .task-list-item{list-style-type:none}div#\:\$p > svg > foreignObject > section .task-list-item label{font-weight:var(--base-text-weight-normal, 400)}div#\:\$p > svg > foreignObject > section .task-list-item.enabled label{cursor:pointer}div#\:\$p > svg > foreignObject > section .task-list-item+.task-list-item{margin-top:var(--base-size-4)}div#\:\$p > svg > foreignObject > section .task-list-item .handle{display:none}div#\:\$p > svg > foreignObject > section .task-list-item-checkbox{margin:0 .2em .25em -1.4em;vertical-align:middle}div#\:\$p > svg > foreignObject > section .contains-task-list:dir(rtl) .task-list-item-checkbox{margin:0 -1.6em .25em .2em}div#\:\$p > svg > foreignObject > section .contains-task-list{position:relative}div#\:\$p > svg > foreignObject > section .contains-task-list:focus-within .task-list-item-convert-container,div#\:\$p > svg > foreignObject > section .contains-task-list:hover .task-list-item-convert-container{display:block;height:24px;overflow:visible;width:auto;clip:auto}div#\:\$p > svg > foreignObject > section ::-webkit-calendar-picker-indicator{filter:invert(50%)}div#\:\$p > svg > foreignObject > section .markdown-alert{border-left:.25em solid var(--borderColor-default);color:inherit;margin-bottom:var(--base-size-16);padding:var(--base-size-8) var(--base-size-16)}div#\:\$p > svg > foreignObject > section .markdown-alert>:first-child{margin-top:0}div#\:\$p > svg > foreignObject > section .markdown-alert>:last-child{margin-bottom:0}div#\:\$p > svg > foreignObject > section .markdown-alert .markdown-alert-title{align-items:center;display:flex;font-weight:var(--base-text-weight-medium, 500);line-height:1}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-note{border-left-color:var(--borderColor-accent-emphasis)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-note .markdown-alert-title{color:var(--fgColor-accent)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-important{border-left-color:var(--borderColor-done-emphasis)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-important .markdown-alert-title{color:var(--fgColor-done)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-warning{border-left-color:var(--borderColor-attention-emphasis)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-warning .markdown-alert-title{color:var(--fgColor-attention)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-tip{border-left-color:var(--borderColor-success-emphasis)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-tip .markdown-alert-title{color:var(--fgColor-success)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-caution{border-left-color:var(--borderColor-danger-emphasis)}div#\:\$p > svg > foreignObject > section .markdown-alert.markdown-alert-caution .markdown-alert-title{color:var(--fgColor-danger)}div#\:\$p > svg > foreignObject > section>:first-child>.heading-element:first-child{margin-top:0!important}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){color:var(--h1-color);font-size:1.6em}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section :is(h2, marp-h2){border-bottom:none}div#\:\$p > svg > foreignObject > section :is(h2, marp-h2){font-size:1.3em}div#\:\$p > svg > foreignObject > section :is(h3, marp-h3){font-size:1.1em}div#\:\$p > svg > foreignObject > section :is(h4, marp-h4){font-size:1.05em}div#\:\$p > svg > foreignObject > section :is(h5, marp-h5){font-size:1em}div#\:\$p > svg > foreignObject > section :is(h6, marp-h6){font-size:.9em}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1) strong,div#\:\$p > svg > foreignObject > section :is(h2, marp-h2) strong,div#\:\$p > svg > foreignObject > section :is(h3, marp-h3) strong,div#\:\$p > svg > foreignObject > section :is(h4, marp-h4) strong,div#\:\$p > svg > foreignObject > section :is(h5, marp-h5) strong,div#\:\$p > svg > foreignObject > section :is(h6, marp-h6) strong{color:var(--heading-strong-color);font-weight:inherit}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h2, marp-h2)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h3, marp-h3)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h4, marp-h4)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h5, marp-h5)::part(auto-scaling),div#\:\$p > svg > foreignObject > section :is(h6, marp-h6)::part(auto-scaling){max-height:563px}div#\:\$p > svg > foreignObject > section hr{height:0;padding-top:.25em}div#\:\$p > svg > foreignObject > section img{background-color:transparent}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre){border:1px solid var(--borderColor-default);line-height:1.15;overflow:visible}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre)::part(auto-scaling){max-height:529px}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs){color:var(--color-prettylights-syntax-storage-modifier-import)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-doctag),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-keyword),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-meta .hljs-keyword),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-template-tag),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-template-variable),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-type),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-variable.language_){color:var(--color-prettylights-syntax-keyword)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-title),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-title.class_),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-title.class_.inherited__),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-title.function_){color:var(--color-prettylights-syntax-entity)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-attr),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-attribute),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-literal),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-meta),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-number),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-operator),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-selector-attr),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-selector-class),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-selector-id),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-variable){color:var(--color-prettylights-syntax-constant)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-meta .hljs-string),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-regexp),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-string){color:var(--color-prettylights-syntax-string)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-built_in),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-symbol){color:var(--color-prettylights-syntax-variable)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-code),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-comment),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-formula){color:var(--color-prettylights-syntax-comment)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-name),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-quote),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-selector-pseudo),div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-selector-tag){color:var(--color-prettylights-syntax-entity-tag)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-subst){color:var(--color-prettylights-syntax-storage-modifier-import)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-section){color:var(--color-prettylights-syntax-markup-heading);font-weight:700}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-bullet){color:var(--color-prettylights-syntax-markup-list)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-emphasis){color:var(--color-prettylights-syntax-markup-italic);font-style:italic}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-strong){color:var(--color-prettylights-syntax-markup-bold);font-weight:700}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-addition){background-color:var(--color-prettylights-syntax-markup-inserted-bg);color:var(--color-prettylights-syntax-markup-inserted-text)}div#\:\$p > svg > foreignObject > section :is(pre, marp-pre) :where(.hljs-deletion){background-color:var(--color-prettylights-syntax-markup-deleted-bg);color:var(--color-prettylights-syntax-markup-deleted-text)}div#\:\$p > svg > foreignObject > section footer,div#\:\$p > svg > foreignObject > section header{color:var(--header-footer-color);font-size:18px;left:30px;margin:0;position:absolute}div#\:\$p > svg > foreignObject > section header{top:21px}div#\:\$p > svg > foreignObject > section footer{bottom:21px}div#\:\$p > svg > foreignObject > section{--h1-color:#246;--header-footer-color:hsla(0,0%,40%,.75);--heading-strong-color:#48c;--paginate-color:#777;align-items:stretch;display:block;flex-flow:column nowrap;font-size:29px;height:720px;padding:78.5px;place-content:safe center center;width:1280px}div#\:\$p > svg > foreignObject > section{--marpit-root-font-size:29px;}div#\:\$p > svg > foreignObject > section:where(.invert){--h1-color:#cee7ff;--header-footer-color:hsla(0,0%,60%,.75);--heading-strong-color:#7bf;--paginate-color:#999;}div#\:\$p > svg > foreignObject > section>:last-child,div#\:\$p > svg > foreignObject > section[data-footer]>:nth-last-child(2){margin-bottom:0}div#\:\$p > svg > foreignObject > section>:first-child,div#\:\$p > svg > foreignObject > section>header:first-child+*{margin-top:0}div#\:\$p > svg > foreignObject > section:after{bottom:21px;color:var(--paginate-color);font-size:24px;padding:0;position:absolute;right:30px}div#\:\$p > svg > foreignObject > section:after{--marpit-root-font-size:24px;}div#\:\$p > svg > foreignObject > section[data-color] :is(h1, marp-h1),div#\:\$p > svg > foreignObject > section[data-color] :is(h2, marp-h2),div#\:\$p > svg > foreignObject > section[data-color] :is(h3, marp-h3),div#\:\$p > svg > foreignObject > section[data-color] :is(h4, marp-h4),div#\:\$p > svg > foreignObject > section[data-color] :is(h5, marp-h5),div#\:\$p > svg > foreignObject > section[data-color] :is(h6, marp-h6){color:currentcolor}div#\:\$p > svg > foreignObject > :where(section){container-type:size}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"]{direction:ltr}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"] > svg{overflow:visible;min-height:1px;min-width:1px}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"] > svg a{fill:blue;stroke:blue}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"][display="true"]{display:block;text-align:center;margin:1em 0}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"][display="true"][width="full"]{display:flex}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"][justify="left"]{text-align:left}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"][justify="right"]{text-align:right}div#\:\$p > svg > foreignObject > section g[data-mml-node="merror"] > g{fill:red;stroke:red}div#\:\$p > svg > foreignObject > section g[data-mml-node="merror"] > rect[data-background]{fill:yellow;stroke:none}div#\:\$p > svg > foreignObject > section g[data-mml-node="mtable"] > line[data-line], div#\:\$p > svg > foreignObject > section svg[data-table] > g > line[data-line]{stroke-width:70px;fill:none}div#\:\$p > svg > foreignObject > section g[data-mml-node="mtable"] > rect[data-frame], div#\:\$p > svg > foreignObject > section svg[data-table] > g > rect[data-frame]{stroke-width:70px;fill:none}div#\:\$p > svg > foreignObject > section g[data-mml-node="mtable"] > .mjx-dashed, div#\:\$p > svg > foreignObject > section svg[data-table] > g > .mjx-dashed{stroke-dasharray:140}div#\:\$p > svg > foreignObject > section g[data-mml-node="mtable"] > .mjx-dotted, div#\:\$p > svg > foreignObject > section svg[data-table] > g > .mjx-dotted{stroke-linecap:round;stroke-dasharray:0,140}div#\:\$p > svg > foreignObject > section g[data-mml-node="mtable"] > g > svg{overflow:visible}div#\:\$p > svg > foreignObject > section [jax="SVG"] mjx-tool{display:inline-block;position:relative;width:0;height:0}div#\:\$p > svg > foreignObject > section [jax="SVG"] mjx-tool > mjx-tip{position:absolute;top:0;left:0}div#\:\$p > svg > foreignObject > section mjx-tool > mjx-tip{display:inline-block;padding:.2em;border:1px solid #888;font-size:70%;background-color:#F8F8F8;color:black;box-shadow:2px 2px 5px #AAAAAA}div#\:\$p > svg > foreignObject > section g[data-mml-node="maction"][data-toggle]{cursor:pointer}div#\:\$p > svg > foreignObject > section mjx-status{display:block;position:fixed;left:1em;bottom:1em;min-width:25%;padding:.2em .4em;border:1px solid #888;font-size:90%;background-color:#F8F8F8;color:black}div#\:\$p > svg > foreignObject > section foreignObject[data-mjx-xml]{font-family:initial;line-height:normal;overflow:visible}div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"] path[data-c], div#\:\$p > svg > foreignObject > section mjx-container[jax="SVG"] use[data-c]{stroke-width:3}@media print{div#\:\$p > svg > foreignObject > section mjx-container[jax=SVG] path[data-c],div#\:\$p > svg > foreignObject > section mjx-container[jax=SVG] use[data-c]{stroke-width:0}}div#\:\$p > svg > foreignObject > section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}div#\:\$p > svg > foreignObject > :where(section):not([\20 root]){--color-primary: #002236;--color-secondary: #1b998b;--color-tertiary: #f5f5f5;--color-success: #12685e;--color-warning: #d1d646;--color-error: #df2935;--color-neutral: #adadad;--color-cyan-blue-azure: #4b8bbe;--color-lapis-lazuli: #306998;--color-shandy: #ffe873;--color-sunglow: #ffd43b;--color-granite-gray: #646464;}div#\:\$p > svg > foreignObject > section :is(h1, marp-h1){color:var(--color-primary);border-bottom:1px solid var(--color-lapis-lazuli)}div#\:\$p > svg > foreignObject > section code{font-size:100%;font-family:"Fira Code", monospace;line-height:1.2em;padding:0em}div#\:\$p > svg > foreignObject > section p{margin-top:0.5em;margin-bottom:0.25em;line-height:1.3em;font-size:100%}div#\:\$p > svg > foreignObject > section img{display:block;margin:auto}div#\:\$p > svg > foreignObject > section sup{font-size:calc(var(--marpit-root-font-size, 1rem) * 0.4);display:inline-block;vertical-align:super}div#\:\$p > svg > foreignObject > section li{margin-top:0.5em;margin-bottom:0.25em;line-height:1.25em;font-size:95%}div#\:\$p > svg > foreignObject > section li>ul>li{margin-top:0.5em;margin-bottom:0.25em;line-height:1em;font-size:85%}div#\:\$p > svg > foreignObject > section i{color:var(--color-error);font-style:normal}div#\:\$p > svg > foreignObject > section s{text-decoration:none;background-color:var(--color-warning)}div#\:\$p > svg > foreignObject > section strong{font-weight:600}div#\:\$p > svg > foreignObject > section figcaption{font-size:0.7em;color:var(--color-primary);text-align:center}div#\:\$p > svg > foreignObject > section figcaption>b{text-align:center;font-weight:600}div#\:\$p > svg > foreignObject > section::after{color:var(--color-neutral);font-size:0.7em;content:" " attr(data-marpit-pagination) " / " attr(data-marpit-pagination-total) " "}div#\:\$p > svg > foreignObject > section::after{--marpit-root-font-size: 0.7em;}div#\:\$p > svg > foreignObject > section .center{text-align:center}div#\:\$p > svg > foreignObject > section .right{text-align:right}div#\:\$p > svg > foreignObject > section .small{font-size:24px}div#\:\$p > svg > foreignObject > section section.small{--marpit-root-font-size: 24px;}div#\:\$p > svg > foreignObject > section table{margin-right:auto;margin-left:auto;margin-top:20px;width:auto;border:0}div#\:\$p > svg > foreignObject > section table th{background-color:var(--color-secondary);color:white;border:0;border-top:rgb(253, 74, 3) solid 2px;border-top:rgb(255, 0, 0) solid 2px}div#\:\$p > svg > foreignObject > section table td{border:0}div#\:\$p > svg > foreignObject > section table tr:nth-child(2){background-color:#dedede}div#\:\$p > svg > foreignObject > section table tr:last-child{border-bottom:rgb(253, 74, 3) solid 2px}div#\:\$p > svg > foreignObject > section tr:nth-child(even){background-color:#e8edf1!important}div#\:\$p > svg > foreignObject > section tr:hover{color:rgb(36, 34, 34);background-color:rgb(255, 204, 0);font-weight:bold}div#\:\$p > svg > foreignObject > section td, div#\:\$p > svg > foreignObject > section th{font-size:calc(var(--marpit-root-font-size, 1rem) * 0.7)}div#\:\$p > svg > foreignObject > section blockquote{color:var(--color-primary);font-size:unset;border-top:0.1em dashed var(--color-secondary);border-left:0.1em dashed var(--color-secondary);padding-top:0.1em;padding-left:0.5em;margin-top:auto}div#\:\$p > svg > foreignObject > section blockquote strong{color:rgb(56, 32, 32);font-weight:bold;font-size:1.0em}div#\:\$p > svg > foreignObject > section blockquote p{font-size:0.6em}div#\:\$p > svg > foreignObject > section blockquote sup{vertical-align:sub}div#\:\$p > svg > foreignObject > section .columns{display:grid;grid-auto-flow:column;gap:calc(var(--marpit-root-font-size, 1rem) * .5)}div#\:\$p > svg > foreignObject > section.titlepage{background:linear-gradient(110deg, var(--color-shandy) 83%, var(--color-lapis-lazuli) 45%)}div#\:\$p > svg > foreignObject > section.titlepage :is(h1, marp-h1){font-size:200%;font-weight:600;border:0;text-align:left;line-height:1.25;padding-right:20%}div#\:\$p > svg > foreignObject > section.titlepage :is(h2, marp-h2){font-size:150%;font-weight:600;text-align:left;line-height:1.2;margin-top:-0.2em;padding-bottom:95px}div#\:\$p > svg > foreignObject > section.titlepage :is(h3, marp-h3), div#\:\$p > svg > foreignObject > section.titlepage :is(h4, marp-h4), div#\:\$p > svg > foreignObject > section.titlepage :is(h5, marp-h5){font-weight:400;line-height:0}div#\:\$p > svg > foreignObject > section.titlepage :is(h5, marp-h5){margin-bottom:1em}div#\:\$p > svg > foreignObject > section.titlepage img{text-align:left;margin:0}div#\:\$p > svg > foreignObject > section.titlepage footer, div#\:\$p > svg > foreignObject > section.titlepage header, div#\:\$p > svg > foreignObject > section.titlepage:after{display:none}div#\:\$p > svg > foreignObject > section.endpage{background-color:var(--color-tertiary);background-image:none;text-align:center!important;font-weight:bold!important;padding-top:auto;padding-bottom:auto}div#\:\$p > svg > foreignObject > section.endpage :is(h1, marp-h1), div#\:\$p > svg > foreignObject > section.endpage :is(h2, marp-h2), div#\:\$p > svg > foreignObject > section.endpage p, div#\:\$p > svg > foreignObject > section.endpage a{font-size:200%;border-bottom:none}div#\:\$p > svg > foreignObject > section.endpage footer, div#\:\$p > svg > foreignObject > section.endpage header, div#\:\$p > svg > foreignObject > section.endpage:after{display:none}div#\:\$p > svg > foreignObject > section.section{background:linear-gradient(110deg, var(--color-granite-gray) 83%, var(--color-lapis-lazuli) 45%);text-align:center!important;font-weight:bold!important;color:white;padding-top:auto;padding-bottom:auto}div#\:\$p > svg > foreignObject > section.section :is(h1, marp-h1), div#\:\$p > svg > foreignObject > section.section :is(h2, marp-h2), div#\:\$p > svg > foreignObject > section.section p, div#\:\$p > svg > foreignObject > section.section a{color:white;font-size:200%;border-bottom:none}div#\:\$p > svg > foreignObject > section.section footer, div#\:\$p > svg > foreignObject > section.section header, div#\:\$p > svg > foreignObject > section.section:after{display:none}div#\:\$p > svg > foreignObject > section.accent{background-image:none;background-color:var(--color-warning);color:var(--color-primary);padding-top:auto;padding-bottom:auto}div#\:\$p > svg > foreignObject > section.accent :is(h1, marp-h1), div#\:\$p > svg > foreignObject > section.accent :is(h2, marp-h2), div#\:\$p > svg > foreignObject > section.accent p, div#\:\$p > svg > foreignObject > section.accent a{text-align:center;border-bottom:none;font-weight:bold!important}div#\:\$p > svg > foreignObject > section.accent :is(h1, marp-h1){font-size:200%}div#\:\$p > svg > foreignObject > section.accent :is(h2, marp-h2){font-size:100%}div#\:\$p > svg > foreignObject > section.accent ol{padding-left:6em}div#\:\$p > svg > foreignObject > section.accent footer, div#\:\$p > svg > foreignObject > section.accent header, div#\:\$p > svg > foreignObject > section.accent:after{display:none}div#\:\$p > svg > foreignObject > section.cite{background-color:var(--color-tertiary);--strong-color: rgb(182, 112, 27);background-image:none}div#\:\$p > svg > foreignObject > section.cite p{color:black;font-size:150%;text-align:center;line-height:1.25em;font-family:Cambria, Cochin, Georgia, Times, "Times New Roman", serif;padding-top:auto;padding-bottom:auto;padding-left:100px;padding-right:100px}div#\:\$p > svg > foreignObject > section.cite strong{color:var(--strong-color)}div#\:\$p > svg > foreignObject > section.cite footer, div#\:\$p > svg > foreignObject > section.cite header, div#\:\$p > svg > foreignObject > section.cite:after{display:none}div#\:\$p > svg > foreignObject > section .cite-author{text-align:right}div#\:\$p > svg > foreignObject > section .cite-author:after{color:#083d77;font-size:125%;font-weight:bold;font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;padding-right:130px}div#\:\$p > svg > foreignObject > section section.cite-author:after{--marpit-root-font-size: 125%;}div#\:\$p > svg > foreignObject > section .cite-author[data-text]:after{content:" - " attr(data-text) " - "}div#\:\$p > svg > foreignObject > section .cite-author p{padding-bottom:40px}div#\:\$p > svg > foreignObject > section.cool-list ol{counter-reset:li;list-style:none;padding:0}div#\:\$p > svg > foreignObject > section.cool-list li{margin-bottom:0.1em!important;margin-top:0.1em!important}div#\:\$p > svg > foreignObject > section.cool-list ol>li>em, div#\:\$p > svg > foreignObject > section.cool-list>ol>li>a{position:relative;display:block;padding:0.4em 0.4em 0.4em 2em;margin:0.5em 0.5em 0.5em 1em;background:#ddd;color:#444;text-decoration:none;border-radius:0.3em;transition:all 0.3s ease-out;font-style:normal}div#\:\$p > svg > foreignObject > section.cool-list ol>li>em:before, div#\:\$p > svg > foreignObject > section.cool-list>ol>li>a:before{content:counter(li);counter-increment:li;position:absolute;left:-1.3em;top:50%;margin-top:-1.3em;background:var(--color-secondary);height:2em;width:2em;line-height:2em;border:0.3em solid #fff;text-align:center;font-weight:normal;border-radius:2em;transition:all 0.3s ease-out;color:white}div#\:\$p > svg > foreignObject > section.cool-list>ol>li>em:hover, div#\:\$p > svg > foreignObject > section.cool-list>ol>li>a:hover{background:#eee;font-weight:bolder}div#\:\$p > svg > foreignObject > section.cool-list>ol ol{margin:0 0 0 2em;font-size:75%;counter-reset:li2}div#\:\$p > svg > foreignObject > section.cool-list>ol ol>li>em:before, div#\:\$p > svg > foreignObject > section.cool-list>ol ol>li>a:before{content:counter(li2);counter-increment:li2}div#\:\$p > svg > foreignObject > section.cool-list>ol>li>ul{list-style-type:disc;margin:0 0 0 1em;font-size:75%}div#\:\$p > svg > foreignObject > section.cool-list>ol ol>li>em{background:#efefef}div#\:\$p > svg > foreignObject > section.biblio{background-color:var(--color-tertiary);background-image:none}div#\:\$p > svg > foreignObject > section.biblio p{color:var(--color-primary);font-size:90%}div#\:\$p > svg > foreignObject > section.biblio :is(h1, marp-h1){color:var(--color-primary);border-bottom:1px solid var(--color-primary)}div#\:\$p > svg > foreignObject > section.biblio strong{color:var(--color-primary)}div#\:\$p > svg > foreignObject > section.biblio a{font-weight:bold;color:var(--color-primary)}div#\:\$p > svg > foreignObject > section.biblio li{color:var(--color-primary)}div#\:\$p > svg > foreignObject > section.biblio footer, div#\:\$p > svg > foreignObject > section.biblio header, div#\:\$p > svg > foreignObject > section.biblio:after{display:none}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]{columns:initial!important;display:block!important;padding:0!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"]::after, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::before, div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"]::after{display:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction="vertical"]{flex-direction:column}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split] > div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split, 50%)}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"][data-marpit-advanced-background-split="right"] > div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="background"] > div[data-marpit-advanced-background-container] > figure > figcaption{position:absolute;border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;white-space:nowrap;width:1px}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="content"], div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"]{background:transparent!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background="pseudo"], div#\:\$p > svg[data-marpit-svg] > foreignObject[data-marpit-advanced-background="pseudo"]{pointer-events:none!important}div#\:\$p > svg > foreignObject > section[data-marpit-advanced-background-split]{width:100%;height:100%}
</style></head><body><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id=":$p"><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-class="titlepage" data-theme="styles" lang="POSIX" class="titlepage" data-marpit-pagination="1" style="--paginate:true;--class:titlepage;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="1-web-scraping">1. Web scraping</h1>
<h2 id="python-y-la-web">Python y la web</h2>
<h3 id="alberto-d%C3%ADaz-%C3%A1lvarez">Alberto Díaz Álvarez</h3>
<h4 id="29-de-noviembre-de-2024">29 de noviembre de 2024</h4>
<h5 id="el-mejor-curso-de-python-del-mundo">El mejor curso de Python del mundo</h5>
<p><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-informational.svg" alt="" style="height:30px;" /></a></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="2" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="un-poco-de-conocimientos-previos">Un poco de conocimientos previos</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="3" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFqu%C3%A9-es-el-hypertext-transfer-protocol-http">¿Qué es el <em>Hypertext Transfer Protocol</em> (HTTP)?</h1>
<p>Diseñado en 1990, es la base de la comunicación de datos en la World Wide Web</p>
<ul>
<li>Protocolo a nivel de aplicación, sobre TCP/IP, que sigue el modelo cliente-servidor</li>
<li>Su puerto estándar de comunicación asignado es el 80</li>
<li>En la actualidad trabajamos con la versión HTTP/2<sup>1</sup> (<a href="https://datatracker.ietf.org/doc/html/rfc7540">RFC7540</a>)</li>
<li>Suficientemente abierto para no impedir el<br />
desarrollo de aplicaciones de terceros
<ul>
<li>Por ejemplo, agentes de información</li>
</ul>
</li>
</ul>
<p>HTTP se utiliza principalmente para transmitir recursos</p>
<ul>
<li>Recurso: fragmento de información identificable mediante una URL (de ahí la R)</li>
<li>El tipo más común de recurso es un archivo</li>
<li>También puede ser una salida generada dinámicamente (e.g. script CGI)</li>
</ul>
<blockquote>
<p><sup>1</sup> En abril de 2016, el tráfico servido por la compañía KeyCDN superó los dos tercios en HTTP/2 frente a HTTP/1.1, la versión que este reemplazaba <a href="https://www.keycdn.com/blog/http2-statistics">https://www.keycdn.com/blog/http2-statistics</a>.</p>
</blockquote>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="4" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="uniform-resource-locator-url"><em>Uniform Resource Locator</em> (URL)</h1>
<p>Es la forma de identificar recursos en la Web, y tiene la siguiente estructura:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-text">protocolo://servidor:puerto/path/hasta/el/recurso?query=con&amp;algun=parametro
</code></pre>
<p>Por ejemplo:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-text">https://www.google.com/search?q=boniato+al+horno&amp;sclient=gws-wiz-serp
</code></pre>
<p>Si no se especifica el puerto se usa el de por defecto (http: 80, https: 443)</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="5" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="modelo-cliente-servidor-y-el-protocolo-http">Modelo cliente-servidor y el protocolo HTTP</h1>
<p>Es un modelo de comunicación donde hay dos entidades:</p>
<ul>
<li>Cliente: solicita recursos al servidor</li>
<li>Servidor: proporciona los recursos solicitados</li>
</ul>
<p>Una sesión HTTP se inicia cuando el cliente envía una petición al servidor</p>
<ol>
<li>El cliente establece una conexion TCP con el servidor</li>
<li>El cliente envía una petición (<strong><em>request</em></strong>) al servidor, y queda a la espera de la respuesta
<ul>
<li>Esta petición obedece a uno de los <strong>métodos</strong> definidos para el protocolo HTTP</li>
</ul>
</li>
<li>El servidor procesa la petición y envía una respuesta (<strong><em>response</em></strong>) al cliente
<ul>
<li>Incluyendo, entre otros, un <strong>código de estado</strong></li>
</ul>
</li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="6" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="mensajes-en-http">Mensajes en HTTP</h1>
<p>Toda comunicación HTTP entre dispositivos se basa en dos tipos de mensaje</p>
<ul>
<li><strong>Request</strong>: mensaje enviado por el cliente al servidor</li>
<li><strong>Response</strong>: mensaje enviado por el servidor al cliente</li>
</ul>
<p>Ambos mensajes tienen caracterísiticas comunes y diferencias:</p>
<ul>
<li>Ambos poseen cabeceras con metainformación (<em>headers</em>)</li>
<li>Ambos pueden poseer un cuerpo adicional donde se envían datos</li>
<li>La request indica el método a utilizar y el recurso al que se quiere acceder</li>
<li>La response indica el código de estado de la respuesta</li>
</ul>
<p>La estructura de los mensajes difiere bastante entre los protocolos 1.1 y 2.0</p>
<ul>
<li>Lo bueno es que con las bibliotecas de Python nos abstraemos de ello</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="7" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="m%C3%A9todos-definidos-para-el-protocolo-http">Métodos definidos para el protocolo HTTP</h1>
<ul>
<li><strong>GET</strong>: solicita un recurso al servidor</li>
<li><strong>HEAD</strong>: solicita los metadatos de un recurso al servidor</li>
<li><strong>POST</strong>: envía datos al servidor</li>
<li><strong>PUT</strong>: envía un recurso al servidor</li>
<li><strong>PATCH</strong>: envía una actualización parcial de un recurso al servidor</li>
<li><strong>DELETE</strong>: elimina un recurso del servidor</li>
<li><strong>CONNECT</strong>: establece un túnel hacia el servidor identificado por el recurso</li>
<li><strong>OPTIONS</strong>: solicita los métodos que el servidor soporta para un recurso</li>
<li><strong>TRACE</strong>: realiza una prueba de bucle de retorno de mensaje al servidor</li>
</ul>
<p>Esta es la teoría, porque luego muchas se implementan como se quiere</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="8" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="c%C3%B3digos-de-estado-status-codes">Códigos de estado (<em>status codes</em>)</h1>
<p>Los códigos de estado son números de tres dígitos que indican el estado de la respuesta</p>
<ul>
<li><code>1xx</code>: información</li>
<li><code>2xx</code>: éxito</li>
<li><code>3xx</code>: redirección</li>
<li><code>4xx</code>: error del cliente</li>
<li><code>5xx</code>: error del servidor</li>
</ul>
<p>Al igual que los métodos, los códigos de estado son estándar, pero no obligatorios</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="9" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="servicios-web">Servicios web</h1>
<p>Un servicio web es un conjunto de protocolos y estándares que permiten la comunicación entre aplicaciones</p>
<ul>
<li>Se basan en estándares abiertos que funcionan sobre el protocolo HTTP</li>
<li>Su origen proviene de estándares de ejecución remota de código de los 90</li>
<li>Un conjunto de servicios web con propósito común se denomina API (<em>Application Programming Interface</em>)</li>
<li>Pueden estar documentados también para máquinas usando WSDL (<em>Web Services Description Language</em>)</li>
</ul>
<p>En la actualidad, estos estándares están en desuso por el auge de la web</p>
<ul>
<li>La transmisión de datos es a través del puerto 80 o 443 (adios <em>firewalls</em>)</li>
<li>Protocolos que funcionan sobre un estándar ya probado (SOAP)</li>
<li>O simplemente conjuntos de pautas para hacer la comunicación más ligera (REST)</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="10" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="acerca-de-rest">Acerca de REST</h1>
<p><em>Representational State Transfer</em> (REST) es un estilo de arquitectura de software</p>
<ul>
<li>No es un protocolo, es un conjunto de principios para la creación de servicios web</li>
</ul>
<p>Sus principios arquitectónicos son:</p>
<ul>
<li><strong>Interfaz uniforme</strong>: La información se envía en formato estándar (XML, JSON, etc.)</li>
<li><strong>Sin estado</strong>: El servidor completa solicitudes independientes (es inherente a HTTP)</li>
<li><strong>Distribuido</strong>: Permite que varios servidores trabajen juntos</li>
<li><strong>Almacenamiento en caché</strong>: Ayuda a mejorar el rendimiento</li>
<li><strong>Código bajo demanda</strong>: El servidor puede enviar código al cliente para ejecutarlo</li>
</ul>
<p>Las API que siguen la arquitectura de REST se llaman <strong>API RESTful</strong></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="11" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="api-restful">API RESTful</h1>
<p>Son aquellos <strong>servicios web que implementan una arquitectura REST</strong></p>
<p>Requieren que las peticiones contengan los siguientes <strong>elementos principales</strong>:</p>
<ul>
<li><strong>URL</strong>: La ruta hacia el recurso o servicio</li>
<li><strong>Método</strong>: La acción que se quiere realizar sobre el servicio, que suelen ser:
<ul>
<li><code>GET</code>: Para obtener listas (e.g. <code>GET /games</code>) o elementos (e.g. <code>GET /game/1</code>)</li>
<li><code>POST</code>: Para enviar información o crear elementos (e.g. <code>POST /game</code>)</li>
<li><code>PUT</code> o <code>PATCH</code>: Para actualizar elementos (e.g. <code>PUT /game/1</code>)</li>
<li><code>DELETE</code>: Para eliminar elementos (e.g. <code>DELETE /game/1</code>)</li>
</ul>
</li>
<li><strong>Cuerpo</strong>: La información enviada al servidor (para peticiones <code>POST</code>, <code>PUT</code> o <code>PATCH</code>)</li>
<li><strong>Cabeceras</strong>: Información adicional de la petición, (e.g. datos de autenticación)</li>
</ul>
<p>Es un estándar muy usado en la actualidad, pero no es obligatorio</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="12" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="vamos-a-por-el-web-scraping">Vamos a por el <em>web scraping</em></h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="13" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFqu%C3%A9-es-el-web-scraping">¿Qué es el <em>web scraping</em>?</h1>
<p>Proceso de <strong>extraer información de sitios web</strong> de forma automatizada</p>
<ul>
<li>Es la única opción si un sitio no ofrece una API (o si lo hace, pero insuficiente)</li>
</ul>
<p>Es extremadamente sencillo; se basa en dos procesos:</p>
<ol>
<li>Navegar por sitios web (los procesos que navegan denominan <em>spiders</em> o <em>crawlers</em>)</li>
<li>Extraer de datos de sitio web (<em>scraping</em>)</li>
</ol>
<p>Es muy útil, pero tiene ciertos <strong>inconvenientes</strong></p>
<ul>
<li>Es <strong>más costoso</strong> que usar una API y genera <strong>más tráfico</strong> entre cliente y servidor</li>
<li>Es <strong>muy sensible a cambios</strong> en la estructura de las páginas web</li>
<li>Hay que respetar las <strong>condiciones</strong> (<strong>legales o no</strong>) de uso de los sitios web</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="14" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFpara-qu%C3%A9-se-utiliza-el-web-scraping">¿Para qué se utiliza el <em>web scraping</em>?</h1>
<p>Algunos de los dominios de aplicación del <em>web scraping</em> son:</p>
<ul>
<li><strong>Automatización del negocio</strong>, evitando tareas manuales tediosas</li>
<li><strong>Estudios de mercado</strong>, dado que algunos datos de mercado son públicos</li>
<li><strong>Generación de <em>leads</em></strong>, o lo que es lo mismo, listas de clientes potenciales</li>
<li><strong>Seguimiento de precios</strong>, como por ejemplo <a href="https://camelcamelcamel.com/">CamelCamelCamel</a></li>
<li><strong>Noticias y contenidos</strong>, agregándolos para una consulta más cómoda</li>
<li><strong>Monitorización de la marca</strong>, para saber qué se dice de ella en Internet</li>
<li><strong>Mercado inmobiliario</strong>, para saber qué se vende y a qué precio</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="15" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="protecci%C3%B3n-contra-el-web-scraping">Protección contra el <em>web scraping</em></h1>
<p>Es lógico que algunas páginas web protejan sus datos contra el web scraping</p>
<ul>
<li>No es infalible, prácticamente <strong>todo</strong> lo que hace un navegador es replicable</li>
<li>Nos queda el consuelo que al menos dificultan la tarea</li>
</ul>
<p>Existen varias técnicas para protegerse contra el web scraping, entre ellas:</p>
<ul>
<li><strong>Análisis del comportamiento del usuario</strong>: Técnicas orientadas a detectar si el usuario es un humano o un robot en función de su comportamiento</li>
<li><strong>Bloqueo de IP</strong>: Cortar acceso a IP identificadas como <em>bots</em></li>
<li><strong><em>Captcha</em></strong><sup>2</sup>: Imagen con texto para demostrar que quien accede es humano<sup>3</sup></li>
<li><strong>Fichero <code>robots.txt</code></strong>: Archivo que indica a los robots qué rutas no deben visitar</li>
<li><strong>HoneyPot</strong>: Sitio falso para la detección de robots</li>
</ul>
<blockquote>
<p><sup>2</sup> Acrónimo para <em><strong>C</strong>ompletely <strong>A</strong>utomated <strong>P</strong>ublic <strong>T</strong>uring test to tell <strong>C</strong>omputers and <strong>H</strong>umans <strong>A</strong>part</em>.<br />
<sup>3</sup> Echad un ojo a <a href="https://www.zenrows.com/">https://www.zenrows.com/</a>; ¿alguien se anima a hacer un TFG del tema?</p>
</blockquote>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="16" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="pero-vamos-a-ver-%C2%BFes-legal-o-no">Pero vamos a ver, ¿es legal o no?</h1>
<p>Anda en un limbo gris entre la legalidad y la no legalidad<sup>4</sup></p>
<ul>
<li>Las condiciones de uso de un sitio específico pueden prohibirlo</li>
<li>Pero para que la extracción sea ilegal, debería ir en contra de una ley ya existente</li>
<li><i><strong>Sí podría haber problemas en caso de que se vulnerase la LGPD o la RGPD</strong></i></li>
</ul>
<p>Cuando se trata de ONG defensoras del acceso abierto, la cosa es más divertida</p>
<ul>
<li>¿Cómo de ilegal es <a href="https://archive.org">https://archive.org</a>?</li>
<li>¿Qué pasa con la investigación peridística cómo <a href="https://www.reuters.com/investigates/adoption/#article/part1">Reuters</a>, <a href="https://revealnews.org/topic/to-protect-and-slur/">Reveal</a> o <a href="https://www.thetrace.org/2020/01/armslist-unlicensed-gun-sales-engaged-in-the-business/">The Trace</a>?</li>
</ul>
<p>En España, la Ley de Servicios de la Sociedad de la Información y de Comercio Electrónico (LSSI-CE) <strong>no prohíbe explícitamente el web scraping</strong></p>
<blockquote>
<p><sup>4</sup> <em>I am not a lawyer</em> (IANAL), así que todo lo que digamos aquí hay que cogerlo con pinzas.</p>
</blockquote>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="17" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="creaci%C3%B3n-de-robots-software-con-python">Creación de robots software con Python</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="18" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="la-biblioteca-urllib">La biblioteca <code>urllib</code></h1>
<p>Es la encargada de trabajar con URLs y de realizar peticiones HTTP</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> urllib.request <span class="hljs-keyword">import</span> urlopen, Request

request = Request(<span class="hljs-string">&#x27;https://www.python.org/&#x27;</span>)
<span class="hljs-keyword">with</span> urlopen(request) <span class="hljs-keyword">as</span> response:
    received_bytes = response.read()
content = received_bytes.decode()
<span class="hljs-built_in">print</span>(content[:<span class="hljs-number">72</span>])
</code></pre>
<p>Este ejemplo realiza una petición <code>GET</code> al recurso indicado y devuelve su contenido</p>
<ul>
<li>Forma parte de la biblioteca estándar, por lo que no es necesario instalar nada</li>
<li>Además de recuperar datos, incluye funciones para gestionar cookies y cabeceras</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="19" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="19" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="par%C3%A1metros-por-get">Parámetros por <code>GET</code></h1>
<p>En el ejemplo anterior, la URL no incluía ningún parámetro</p>
<ul>
<li>En el caso de una petición <code>GET</code>, estos se añaden a la URL</li>
<li>Sin embargo, hay que tener cuidado con la codificación de los caracteres especiales</li>
</ul>
<p>Para ello, podemos usar la función <code>urlencode</code> de <code>urllib.parse</code></p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> urlencode

params = urlencode({<span class="hljs-string">&#x27;q&#x27;</span>: <span class="hljs-string">&#x27;python&#x27;</span>})
url = <span class="hljs-string">&#x27;https://www.google.com/search?&#x27;</span> + params
<span class="hljs-built_in">print</span>(url)
</code></pre>
<p>Así nos aseguramos de que todo carácter especial es codificado correctamente</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="20" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="20" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="datos-por-post">Datos por <code>POST</code></h1>
<p>Una petición de tipo POST envía los parámetros en el cuerpo de la petición</p>
<ul>
<li>POST es más flexible que GET, ya que permite enviar datos binarios (e.g. ficheros)</li>
</ul>
<p>Para enviar datos por POST, basta con crear la <em>request</em> con datos:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">data = urlencode({<span class="hljs-string">&#x27;key&#x27;</span>: <span class="hljs-string">&#x27;value&#x27;</span>}).encode()
request = Request(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, data=data)
<span class="hljs-keyword">with</span> urlopen(request) <span class="hljs-keyword">as</span> response:
    <span class="hljs-built_in">print</span>(response.read().decode())
</code></pre>
<p>Esto no funciona si el cuerpo de datos es vacío</p>
<ul>
<li>Se puede solucionar añadiendo el argumento <code>method='POST'</code> al crear la <em>request</em></li>
<li>De hecho con este argumento se especifica el método de la petición</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="21" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="21" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="formularios-y-post">Formularios y <code>POST</code></h1>
<p>Los formularios HTML se envían por <code>POST</code> por defecto</p>
<ul>
<li>Cada campo del formulario se envía como un parámetro diferente</li>
</ul>
<p>Veamos los tipos más comunes:</p>
<ul>
<li><code>text</code>, <code>password</code>, <code>hidden</code>, <code>textarea</code>, <code>select</code>, <code>radio</code>: Se envía el <em>name</em>/<em>value</em> del campo</li>
<li><code>checkbox</code>: Se envían tantos <em>name</em>/<em>value</em> como checkboxes estén marcados</li>
</ul>
<p>Los formularios se pueden enviar también por <code>GET</code></p>
<ul>
<li>En este caso, los parámetros se añaden a la URL</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="22" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="22" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFy-si-queremos-enviar-ficheros">¿Y si queremos enviar ficheros?</h1>
<p>De hecho, es una de las características de <code>POST</code> frente a <code>GET</code></p>
<ul>
<li>Es similar al caso anterior, pero enviando el contenido de un fichero</li>
<li>Es útil añadir ciertas cabeceras para indicar el tamaño y el tipo de contenido</li>
</ul>
<p>Por ejemplo, para enviar una imagen PNG:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> os

image_path = <span class="hljs-string">&#x27;images/python.png&#x27;</span>
image_size = os.path.getsize(image_path)
image_data = <span class="hljs-built_in">open</span>(image_path, <span class="hljs-string">&#x27;rb&#x27;</span>)
request = Request(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, data=image_data)
request.add_header(<span class="hljs-string">&#x27;Content-Length&#x27;</span>, image_size)
request.add_header(<span class="hljs-string">&#x27;Content-Type&#x27;</span>, <span class="hljs-string">&#x27;image/png&#x27;</span>)
<span class="hljs-keyword">with</span> urlopen(request) <span class="hljs-keyword">as</span> response:
    <span class="hljs-built_in">print</span>(response.read().decode())
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="23" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="23" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-leemos-las-cabeceras-de-una-respuesta">¿Cómo leemos las cabeceras de una respuesta?</h1>
<p>Toda petición conlleva una respuesta con cabeceras y (a veces) datos</p>
<ul>
<li>La biblioteca <code>urllib</code> las comprime en un objeto <code>HTTPMessage</code></li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">request = Request(<span class="hljs-string">&#x27;https://www.python.org/&#x27;</span>)
<span class="hljs-keyword">with</span> urlopen(request) <span class="hljs-keyword">as</span> response:
    <span class="hljs-built_in">print</span>(response.headers)
</code></pre>
<p>Este objeto se comporta como un diccionario</p>
<ul>
<li>Con el método <code>get</code> podemos obtener el valor de la cabecera indicada</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="24" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="24" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="cabeceras-%C3%BAtiles-en-web-scraping">Cabeceras útiles en <em>web scraping</em></h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="25" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="25" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="cabecera-accept">Cabecera <em>Accept</em></h1>
<p>Indica al servidor web qué formato de datos entiende cliente</p>
<ul>
<li>Por ejemplo, si el cliente entiende HTML, JSON, XML, etc.</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">request = Request(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)
request.add_header(<span class="hljs-string">&#x27;Accept&#x27;</span>, <span class="hljs-string">&#x27;application/json;q=0.9,*/*;q=0.8&#x27;</span>)
</code></pre>
<p>El factor de calidad <code>q</code> indica la preferencia del cliente</p>
<ul>
<li>Se utiliza en las cabeceras que aceptan varios valores</li>
</ul>
<p>Es importante que la cadena sea similar a la ofrecida por los navegadores</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="26" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="26" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="cabecera-accept-encoding">Cabecera <em>Accept-Encoding</em></h1>
<p>Notifica al servidor web qué algoritmo de compresión utilizar para gestionar la petición</p>
<ul>
<li>Por ejemplo, si el cliente entiende <code>gzip</code>, <code>deflate</code>, <code>br</code>, etc.</li>
<li>Dicho de otro modo, si el cliente y el servidor pueden comprimir la información</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">request = Request(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)
request.add_header(<span class="hljs-string">&#x27;Accept-Encoding&#x27;</span>, <span class="hljs-string">&#x27;gzip, deflate, br&#x27;</span>)
</code></pre>
<p>Esta cabecera es especialmente útil para reducir el tamaño de las respuestas</p>
<ul>
<li>Menos tiempo de espera y menos ancho de banda, win-win para cliente y servidor</li>
</ul>
<p>El <em>encoding</em> <code>br</code> (Brotli) se usa para identificar scrapers, pero <code>urllib</code> ya lo soporta</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="27" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="27" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="cabecera-accept-language">Cabecera <em>Accept-Language</em></h1>
<p>Indica al servidor qué idiomas prefiere el cliente</p>
<ul>
<li>Se puede especificar un único idioma o una lista de idiomas</li>
<li>Entra en juego cuando los servidores web no pueden identificar el idioma preferido</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">request = Request(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)
request.add_header(<span class="hljs-string">&#x27;Accept-Language&#x27;</span>, <span class="hljs-string">&#x27;en-US, en;q=0.9, es;q=0.8&#x27;</span>)
</code></pre>
<p>Es un factor más a la hora de detectar comportamientos no humanos</p>
<ul>
<li>Puede ser útil hacer que los lenguajes se ajusten a la ubicación IP del cliente</li>
<li>También es útil ajustar los valores de <code>q</code> para no destacar frente al resto de tráfico</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="28" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="28" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="cabecera-user-agent">Cabecera <em>User-Agent</em></h1>
<p>Ayuda al servidor a identificar y adaptar el contenido al cliente</p>
<ul>
<li>Por ejemplo, si el cliente es un navegador web, un teléfono móvil, un reproductor multimedia, etc.</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">request = Request(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)
request.add_header(<span class="hljs-string">&#x27;User-Agent&#x27;</span>, <span class="hljs-string">&#x27;Mozilla/5.0 (X11; Ubuntu; Linux x86_64 ...&#x27;</span>)
</code></pre>
<p>Suelen seguir el formato:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-text">(&lt;navegador&gt;) (&lt;sistema&gt;) &lt;plataforma&gt; (&lt;detalles plataforma&gt;) &lt;extensiones&gt;
</code></pre>
<p>Es importante porque ayuda a enmascarar el scraper como un navegador web</p>
<ul>
<li>Si está mal formado, lo más normal es que el servidor lo bloquee</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="29" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="29" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="cabecera-referersup6sup">Cabecera <em>Referer</em><sup>6</sup></h1>
<p>Indica la URL de la página desde la que se ha hecho la petición</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">request = Request(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)
request.add_header(<span class="hljs-string">&#x27;Referer&#x27;</span>, <span class="hljs-string">&#x27;https://www.google.com/&#x27;</span>)
</code></pre>
<p>Esta cabecera es importante para identificar patrones de uso en usuarios</p>
<ul>
<li>Y los usuarios no suelen entrar en páginas web de forma aleatoria</li>
<li>Suelen venir de buscadores web, redes sociales, etétera</li>
</ul>
<p>Especificar esta cabecera para que el agente parezca más «humano»</p>
<blockquote>
<p><sup>6</sup> ¿Os habéis fijado que está mal escrito? Debería ser <em>Referrer</em>. Más información en <a href="https://en.wikipedia.org/wiki/HTTP_referer">https://en.wikipedia.org/wiki/HTTP_referer</a></p>
</blockquote>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="30" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="30" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="forma-alternativa-de-establecer-cabeceras">Forma alternativa de establecer cabeceras</h1>
<p>El posible especificar un diccionario con las cabeceras al construir la<br />
<em>request</em>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">request = Request(url, data=<span class="hljs-literal">None</span>, headers={
    <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json;q=0.9,*/*;q=0.8&#x27;</span>,
    <span class="hljs-string">&#x27;Accept-Encoding&#x27;</span>: <span class="hljs-string">&#x27;gzip, deflate&#x27;</span>,
    <span class="hljs-string">&#x27;Accept-Language&#x27;</span>: <span class="hljs-string">&#x27;en-US, en;q=0.9, es;q=0.8&#x27;</span>
    <span class="hljs-comment"># ...</span>
  }
)
</code></pre>
<p>No es ni mejor ni peor, es simplemente otra forma de hacerlo</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="31" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="31" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="biblioteca-requests">Biblioteca <code>requests</code></h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="32" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="32" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="sobre-esta-biblioteca">Sobre esta biblioteca</h1>
<p>Simplifica mucho el trabajo con HTTP. Entre sus características destacan:</p>
<ul>
<li>Facilidad de uso de <em>cookies</em> para mantener sesiones</li>
<li>Codificación automática del contenido de las respuestas</li>
<li>Codificación automática de URL internacionalizadas y datos POST</li>
<li>Facilidad en el uso de <em>proxies</em> y <em>certificados SSL</em></li>
<li>Soporte para <em>streaming</em> de datos</li>
<li>Implementación automática de conexiones persistentes (<em>keep-alive</em>)</li>
</ul>
<p>Eso sí, es una biblioteca de terceros, así que habrá que instalarla aparte:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-bash">pip install requests
</code></pre>
<p>Documentación oficial en <a href="https://requests.readthedocs.io">https://requests.readthedocs.io</a></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="33" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="33" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-realizo-una-petici%C3%B3n-http">¿Cómo realizo una petición HTTP?</h1>
<p>Tan sencillo como usar la función <code>get</code> de la biblioteca:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)
</code></pre>
<p>De hecho, cada método tiene su propia función:</p>
<ul>
<li><code>get()</code>, <code>post()</code>, <code>put()</code>, <code>patch()</code>, <code>delete()</code>, <code>head()</code>, <code>options()</code></li>
</ul>
<p>Enviar parámetros también es sencillo, basta con usar el diccionario <code>params</code>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, params={<span class="hljs-string">&#x27;p1&#x27;</span>:<span class="hljs-string">&#x27;v1&#x27;</span>,<span class="hljs-string">&#x27;p2&#x27;</span>:<span class="hljs-string">&#x27;v2&#x27;</span>})
</code></pre>
<p>Y establecer un tiempo máximo de respuesta con el parámetro <code>timeout</code>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, timeout=<span class="hljs-number">5</span>)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="34" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="34" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="env%C3%ADo-de-datos-en-peticiones-postputpatch">Envío de datos en peticiones POST/PUT/PATCH</h1>
<p>En este caso, habría que utilizar el parámetro <code>data</code>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.post(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, data={
  <span class="hljs-string">&#x27;param1&#x27;</span>: <span class="hljs-string">&#x27;val1&#x27;</span>,
  <span class="hljs-string">&#x27;param2&#x27;</span>: <span class="hljs-string">&#x27;val2&#x27;</span>
})
response.text
</code></pre>
<p>No es necesario codificar los datos, la biblioteca lo hace por nosotros</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="35" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="35" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFy-si-necesitamos-especificar-el-tipo-de-contenido">¿Y si necesitamos especificar el tipo de contenido?</h1>
<p>En ese caso jugamos con las cabeceras:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.post(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, data={
    <span class="hljs-string">&#x27;param1&#x27;</span>: <span class="hljs-string">&#x27;val1&#x27;</span>,
    <span class="hljs-string">&#x27;param2&#x27;</span>: <span class="hljs-string">&#x27;val2&#x27;</span>
}, headers={<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/xml&#x27;</span>})
response.text
</code></pre>
<p>¡E incluso con los datos!</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.post(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>,
    data=<span class="hljs-string">&#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;soap:Envelope...&#x27;</span>,
    headers={<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/xml&#x27;</span>})
response.text
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="36" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="36" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFy-si-necesitamos-enviar-un-fichero">¿Y si necesitamos enviar un fichero?</h1>
<p>Pues nada, para eso tenemos el parámetro <code>files</code>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.post(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, files={
  <span class="hljs-string">&#x27;file1&#x27;</span>: <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;file1.txt&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>),
  <span class="hljs-string">&#x27;file2&#x27;</span>: <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;file2.txt&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>)
})
</code></pre>
<p>Aunque también podemos especificar explícitamente el nombre y tipo del fichero:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">files = {<span class="hljs-string">&#x27;f1&#x27;</span>: (<span class="hljs-string">&#x27;cosa.pdf&#x27;</span>, <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;algo.pdf&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>), <span class="hljs-string">&#x27;application/pdf&#x27;</span>)}
response = requests.post(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, files=files)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="37" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="37" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="obteniendo-informaci%C3%B3n-de-la-respuesta">Obteniendo información de la respuesta</h1>
<p>El objeto de respuesta tiene muchos miembros interesantes, como lo son:</p>
<ul>
<li><code>status_code</code>: Código de estado HTTP</li>
<li><code>headers</code>: Diccionario con las cabeceras de la respuesta</li>
<li><code>cookies</code>: Diccionario con las cookies de la respuesta</li>
<li><code>content</code>: Contenido de la respuesta</li>
<li><code>encoding</code>: Codificación de la respuesta (se puede establecer)</li>
<li><code>text</code>: Contenido de la respuesta en formato texto (decodificado)</li>
<li><code>history</code>: Información de todas las redirecciones que han ocurrido
<ul>
<li>Aunque se puede especificar <code>allow_redirects = False</code> para evitar redirecciones</li>
</ul>
</li>
<li><code>json()</code>: Contenido de la respuesta en formato JSON</li>
<li><code>raise_for_status()</code>: Lanza una excepción si el código de estado no es 200</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="38" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="38" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-se-pueden-especifican-las-cabeceras">¿Cómo se pueden especifican las cabeceras?</h1>
<p>Cualquier método de petición acepta un parámetro <code>headers</code>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">response = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, headers={
    <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json;q=0.9,*/*;q=0.8&#x27;</span>,
    <span class="hljs-string">&#x27;Accept-Encoding&#x27;</span>: <span class="hljs-string">&#x27;gzip, deflate&#x27;</span>,
    <span class="hljs-string">&#x27;Accept-Language&#x27;</span>: <span class="hljs-string">&#x27;en-US, en;q=0.9, es;q=0.8&#x27;</span>
})
response.headers
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="39" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="39" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-enviar-cookies-en-una-petici%C3%B3n">¿Cómo enviar <em>cookies</em> en una petición?</h1>
<p>Aunque se puede perfectamente con <code>urllib</code>, con <code>requests</code> es mucho más sencillo<sup>7</sup>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">jar = requests.cookies.RequestsCookieJar()
jar.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;cookie1&#x27;</span>, <span class="hljs-string">&#x27;v1&#x27;</span>, domain=<span class="hljs-string">&#x27;httpbin.org&#x27;</span>, path=<span class="hljs-string">&#x27;/&#x27;</span>)
jar.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;cookie2&#x27;</span>, <span class="hljs-string">&#x27;v2&#x27;</span>, domain=<span class="hljs-string">&#x27;httpbin.org&#x27;</span>, path=<span class="hljs-string">&#x27;/anything&#x27;</span>)
response = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, cookies=jar)
response.text
</code></pre>
<blockquote>
<p><sup>7</sup> De hecho, trabajar con el objeto <code>CookieJar</code> de <code>urllib</code> es bastante pesado, por eso ni lo comentamos</p>
</blockquote>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="40" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="40" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-mantener-sesiones">¿Cómo mantener sesiones?</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">session = requests.Session()
session.get(<span class="hljs-string">&#x27;https://httpbin.org/cookies/set?cookie1=val1&#x27;</span>)
session.get(<span class="hljs-string">&#x27;https://httpbin.org/cookies/set?cookie2=val2&#x27;</span>)
response = session.get(<span class="hljs-string">&#x27;https://httpbin.org/cookies&#x27;</span>)
response.text
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="41" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="41" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="autenticaci%C3%B3n">Autenticación</h1>
<p>La biblioteca permite autenticarse con varios métodos:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">auth = HTTPBasicAuth(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;passwd&#x27;</span>)  <span class="hljs-comment"># HTTPDigestAuth, HTTPProxyAuth, ...</span>
<span class="hljs-comment"># auth = </span>
response = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/hidden-basic-auth/user/passwd&#x27;</span>, auth=auth)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="42" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="42" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-podemos-usar-proxies">¿Cómo podemos usar <em>proxies</em>?</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">proxies={<span class="hljs-string">&#x27;http&#x27;</span>: <span class="hljs-string">&#x27;http://ip:puerto&#x27;</span>, <span class="hljs-string">&#x27;https&#x27;</span>: <span class="hljs-string">&#x27;https://ip:puerto})
requests.get(&#x27;</span>https://httpbin.org/anything<span class="hljs-string">&#x27;, proxies=proxies)
</span></code></pre>
<p>Para mantenerlos en una sesión, se puede hacer de la siguiente forma:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">proxies = {<span class="hljs-string">&#x27;http&#x27;</span>: <span class="hljs-string">&#x27;http://ip:puerto&#x27;</span>, <span class="hljs-string">&#x27;https&#x27;</span>: <span class="hljs-string">&#x27;https://ip:puerto&#x27;</span>}
session = requests.Session()
session.proxies.update(proxies)
session.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="43" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="43" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="bonus-track-peticiones-a-trav%C3%A9s-de-tor">BONUS TRACK: Peticiones a través de Tor</h1>
<p>Podemos usar los proxies configurados en la máquina para hacer peticiones a través de Tor:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">proxies = {
  <span class="hljs-string">&#x27;http&#x27;</span>: <span class="hljs-string">&#x27;socks5://127.0.0.1:9050&#x27;</span>,
  <span class="hljs-string">&#x27;https&#x27;</span>: <span class="hljs-string">&#x27;socks5://127.0.0.1:9050&#x27;</span>
}
requests.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>, proxies=proxies)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="44" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="44" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="extrayendo-informaci%C3%B3n-del-contenido">Extrayendo información del contenido</h1>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="45" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="45" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="introducci%C3%B3n">Introducción</h1>
<p>Una vez con el contenido descargado, tenemos varias formas de trabajar con él:</p>
<ul>
<li>A mano, con los métodos de <code>string</code> (i.e. subcadenas, <code>split</code>, ... ni os molestéis)</li>
<li>Con expresiones regulares, con la biblioteca <code>re</code></li>
<li>Con bibliotecas para scraping estructurado
<ul>
<li><code>XPath</code>: Lenguaje de consulta de documentos XML</li>
<li><code>BeautifulSoup</code> para procesamiento de HTML y XML</li>
<li><code>Scrapy</code>, que es un framework completo para <em>web scraping</em> (incluye <em>crawling</em>)</li>
</ul>
</li>
<li>Con bibliotecas para scraping no estructurado
<ul>
<li><code>Selenium</code>, que emula un navegador web real</li>
<li><code>Playwright</code>, alternativa a Selenium, más moderna y rápida</li>
<li><code>pypeteer</code>, una versión de Python de Puppeteer</li>
</ul>
</li>
</ul>
<p>Veamos una pqueña introducción a cada uno de ellos</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="46" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="46" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="expresiones-regulares">Expresiones regulares</h1>
<h3 id="extrayendo-informaci%C3%B3n-del-contenido-1">Extrayendo información del contenido</h3>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="47" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="47" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="expresiones-regulares-1">Expresiones regulares</h1>
<p>Mecanismo muy potente de definir lenguajes (y estructuras) de tipo 3</p>
<ul>
<li>Son muy <strong>compactas</strong> y (relativamente) <strong>fáciles</strong> de entender</li>
<li>Prácticamente <strong>cualquier lenguaje de programación</strong> las soporta</li>
</ul>
<p>Son cadenas de texto que intentamos que &quot;encajen&quot; con el texto a extraer</p>
<ul>
<li>Encajar (<em>match</em>) significa que la cadena a extraer cumple una serie de condiciones
<ul>
<li><code>a href=</code> encaja exactamente con ese texto</li>
<li><code>a.*=</code> encaja con cualquier texto que empiece por <code>a</code>, 0 o más caracteres y un <code>=</code>, como <code>a href=</code>, <code>a class=</code>, <code>a id=</code>, etc.</li>
</ul>
</li>
</ul>
<p>Hay mucho escrito sobre expresiones regulares, aquí veremos lo <strong>muy</strong> básico</p>
<ul>
<li>Disponible en <a href="http://docs.python.org/library/re.html">http://docs.python.org/library/re.html</a></li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="48" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="48" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="metacaracteres">Metacaracteres</h1>
<div class="columns">
<div class="column">
<ul>
<li><code>.</code>: Cualquier carácter</li>
<li><code>*</code>: La expresión precedente se repite 0 o más veces</li>
<li><code>+</code>: La expresión precedente se repite 1 o más veces</li>
<li><code>?</code>: La expresión precedente es opcional</li>
<li><code>{n}</code>: La expresión precedente se repite exactamente <code>n</code> veces</li>
<li><code>{n,}</code>: La expresión precedente se repite al menos <code>n</code> veces</li>
<li><code>{n,m}</code>: La expresión precedente se repite entre <code>n</code> y <code>m</code> veces</li>
</ul>
</div>
<div class="column">
<ul>
<li><code>\n</code>: Salto de línea</li>
<li><code>\t</code>: Tabulador</li>
<li><code>\s</code>: Cualquier carácter de espaciado (blanco, tabulador, salto de línea, etc.)</li>
<li><code>^</code>: Distinto de
<ul>
<li><code>^&lt;*</code>: Cualquier carácter distinto de <code>&lt;</code> 0 o más veces</li>
</ul>
</li>
<li><code>\</code>: Carácter de escape para usar metacaracteres como caracteres normales</li>
<li><code>[]</code>: Conjunto de caracteres
<ul>
<li><code>[abc]</code>, <code>[a-zA-Z]</code>, <code>[a-z0-9]</code>, etc.</li>
</ul>
</li>
</ul>
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="49" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="49" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="encaje-voraz">Encaje &quot;voraz&quot;</h1>
<p>Por defecto, las expresiones regulares intentan encajar con el texto de la forma más larga posible</p>
<ul>
<li><code>.*c</code> aplicada a <code>ababcababcab</code> devolverá <code>ababcababc</code> en lugar de <code>ababc</code></li>
</ul>
<p>Para hacer que no sea así, podemos usar el carácter <code>?</code> después del <code>*</code>, del <code>+</code> o del <code>?</code></p>
<ul>
<li><code>.*?c</code> aplicada a <code>ababcababcab</code> devolverá <code>ababc</code></li>
</ul>
<p>En <em>scraping</em> se suele usar siempre el encaje no voraz</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="50" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="50" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="comprobar-existencia-de-un-texto">Comprobar existencia de un texto</h1>
<p>Podemos determinar la existencia de cierto texto o patrón mediante <code>search</code></p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> re

texto = <span class="hljs-string">&#x27;ababcababcab&#x27;</span>
patron = <span class="hljs-string">&#x27;a.*?c&#x27;</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Encontrado&#x27;</span> <span class="hljs-keyword">if</span> re.search(patron, texto) <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;No encontrado&#x27;</span>)
</code></pre>
<p>Si queremos recuperar el texto, tenemos que usar &quot;grupos&quot; (con paréntesis)</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">texto = <span class="hljs-string">&#x27;ababcababcab&#x27;</span>
patron = <span class="hljs-string">&#x27;a(.*?)c&#x27;</span>
<span class="hljs-keyword">if</span> m := re.search(patron, texto):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Encontrado: <span class="hljs-subst">{m.group(<span class="hljs-number">1</span>)}</span>)
else:
    print(&#x27;</span>No encontrado<span class="hljs-string">&#x27;)
</span></code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="51" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="51" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFqu%C3%A9-pasa-si-buscamos-muchos-patrones">¿Qué pasa si buscamos muchos patrones?</h1>
<p>Pues que usaremos <code>findall</code> en lugar de <code>search</code></p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">texto = <span class="hljs-string">&#x27;ababcababcab&#x27;</span>
patron = <span class="hljs-string">&#x27;a(.*?)c&#x27;</span>
<span class="hljs-built_in">print</span>(re.findall(patron, texto))
</code></pre>
<p>En lugar de un objeto <em>match</em> nos devuelve una lista de cadenas</p>
<ul>
<li>Hay <em>flags</em> que vienen bien porque modifican el comporamiento de los metacaracteres:
<ul>
<li><code>re.DOTALL</code>: <code>.</code> coincide con cualquier carácter, incluido el salto de línea <code>\n</code></li>
<li><code>re.MULTILINE</code>: <code>^</code> coincidirá con el comienzo de línea y <code>$</code> con el final de línea</li>
<li><code>re.IGNORECASE</code>: Hace que las expresiones regulares sean insensibles a mayúsculas y minúsculas</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="52" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="52" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="ganando-eficiencia-con-expresiones-regulares">Ganando eficiencia con expresiones regulares</h1>
<p>Las expresiones regulares se compilan para ejecutarse sobre un texto</p>
<ul>
<li>Cada vez que usamos uno de sus métodos (e.g. <code>search</code>, <code>findall</code>, ...) compilamos la expresión</li>
</ul>
<p>Es recomendable compilar una expresión previamente si la vamos a usar mucho</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">expr = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">&#x27;a(.*?)c&#x27;</span>)
expr.search(<span class="hljs-string">&#x27;ababcababcab&#x27;</span>)
expr.findall(<span class="hljs-string">&#x27;ababcababcab&#x27;</span>)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="53" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="53" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="algunos-consejos">Algunos consejos</h1>
<p>Para extraer varios valores es muy cómodo dividir la expresión en trozos</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">xtr = <span class="hljs-string">&#x27;.*?&lt;a href=“(.*?)&quot;&#x27;</span> <span class="hljs-comment"># url</span>
xtr += <span class="hljs-string">&#x27;.*?&lt;td&gt;(.*?)&lt;/td&gt;&#x27;</span> <span class="hljs-comment"># incidencia</span>
</code></pre>
<p>Hay herramientas online que ayudan a explicar los patrones que necesitamos</p>
<ul>
<li>Por ejemplo, <a href="https://www.regex101.com">https://www.regex101.com</a></li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="54" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="54" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="xpath">XPath</h1>
<h3 id="extrayendo-informaci%C3%B3n-del-contenido-2">Extrayendo información del contenido</h3>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="55" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="55" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFqu%C3%A9-es-xpath">¿Qué es XPath?</h1>
<p>Lenguaje de consula para navegar a través de documentos XML y HTML</p>
<ul>
<li>Desarrollado por el W3C como parte de la recomendación XSLT<sup>8</sup></li>
<li>Permite seleccionar nodos y elementos específicos dentro de un documento</li>
</ul>
<p>Ofrece un mecanismo muy preciso para la extracción de datos de páginas web</p>
<ul>
<li>Permite seleccionar elementos basados en su nombre, atributos y posición.</li>
<li>Admite operadores lógicos y aritméticos para filtrar y manipular los datos.</li>
<li>Permite acceder a elementos muy anidados y a estructuras complejas de datos.</li>
</ul>
<p>Para su uso, tenemos que instalar la biblioteca <code>lxml</code></p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-bash">$ pip install lxml
</code></pre>
<blockquote>
<p><sup>8</sup> Recomendación oficial de la W3C en <a href="https://www.w3.org/TR/1999/REC-xpath-19991116/">https://www.w3.org/TR/1999/REC-xpath-19991116/</a></p>
</blockquote>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="56" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="56" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="un-ejemplo-de-c%C3%B3digo">Un ejemplo de código</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> request
<span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> html

<span class="hljs-comment"># Obtenemos el html de una página</span>
page = requests.get(<span class="hljs-string">&#x27;https://httpbin.org&#x27;</span>)
<span class="hljs-comment"># La transformamos en un árbol de elementos</span>
tree = html.fromstring(page.content)
<span class="hljs-comment"># Seleccionamos un elemento específico usando XPath</span>
titulo = tree.xpath(<span class="hljs-string">&#x27;//title/text()&#x27;</span>)
</code></pre>
<p>Por ejemplo, para extraer los títulos de las noticias de la BBC:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">page = requests.get(<span class="hljs-string">&#x27;https://www.bbc.com/news&#x27;</span>)
tree = html.fromstring(page.content)
<span class="hljs-built_in">print</span>(tree.xpath(<span class="hljs-string">&#x27;//a[@class=&quot;gs-c-block-link__overlay-link&quot;]/text()&#x27;</span>))
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="57" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="57" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="biblioteca-beautifulsoup">Biblioteca <code>BeautifulSoup</code></h1>
<h3 id="extrayendo-informaci%C3%B3n-del-contenido-3">Extrayendo información del contenido</h3>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="58" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="58" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="sobre-esta-biblioteca-1">Sobre esta biblioteca</h1>
<p>Es una biblioteca de Python para extraer datos de archivos HTML y XML</p>
<ul>
<li>Crea un árbol de análisis a partir del código fuente de la página</li>
<li>Proporciona métodos para navegar y buscar en el árbol</li>
</ul>
<p>Sus ventajas principales son:</p>
<ul>
<li>Es muy fácil de usar y muy intuitiva</li>
<li>Permite manejar documentos que no están del todo bien formados</li>
</ul>
<p>Para instalarla, simplemente ejecutamos:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-bash">$ pip install beautifulsoup4
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="59" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="59" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="b%C3%BAsqueda-de-elementos-complejos">Búsqueda de elementos complejos</h1>
<p>Supongamos que queremos extraer datos de estructuras HTML complejas utilizando combinaciones de selectores CSS.</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup

html = <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;producto&quot;&gt;
    &lt;span class=&quot;precio&quot;&gt;$10&lt;/span&gt;&lt;span class=&quot;precio&quot;&gt;$20&lt;/span&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

soup = BeautifulSoup(html, <span class="hljs-string">&quot;html.parser&quot;</span>)
precios = soup.select(<span class="hljs-string">&quot;div.producto &gt; span.precio&quot;</span>)  <span class="hljs-comment"># Selectores CSS</span>
<span class="hljs-keyword">for</span> precio <span class="hljs-keyword">in</span> precios:
    <span class="hljs-built_in">print</span>(precio.text)
</code></pre>
<ul>
<li>Podemos usar combinaciones como <code>#id</code>, <code>.clase</code>, <code>elemento:atributo</code></li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="60" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="60" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="navegaci%C3%B3n-por-la-estructura-dom">Navegación por la estructura DOM</h1>
<p>Podemos navegar por la estructura del documento HTML como si fuera un árbol</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">html = <span class="hljs-string">&quot;&quot;&quot;
&lt;div class=&quot;producto&quot;&gt;
    &lt;h3&gt;Producto 1&lt;/h3&gt;
    &lt;p&gt;Descripción del producto.&lt;/p&gt;
&lt;/div&gt;
&quot;&quot;&quot;</span>

soup = BeautifulSoup(html, <span class="hljs-string">&quot;html.parser&quot;</span>)
div = soup.find(<span class="hljs-string">&quot;div&quot;</span>, class_=<span class="hljs-string">&quot;producto&quot;</span>)  <span class="hljs-comment"># Encuentra el primer div de clase &#x27;producto&#x27;</span>
titulo = div.find_next(<span class="hljs-string">&quot;h3&quot;</span>).text  <span class="hljs-comment"># Encuentra el siguiente nodo h3 dentro del div</span>
<span class="hljs-built_in">print</span>(titulo)
</code></pre>
<ul>
<li><code>find_next()</code>: Encuentra el siguiente nodo en el árbol DOM<sup>9</sup></li>
<li>También puedes usar <code>find_previous()</code> y <code>find_parent()</code> para moverte hacia atrás</li>
</ul>
<blockquote>
<p><sup>9</sup> El <em>Document Object Model</em> (DOM) define la estructura de un fichero HTML como un árbol. Más información en la <a href="https://en.wikipedia.org/wiki/Document_Object_Model">Wikipedia</a>.</p>
</blockquote>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="61" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="61" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="estraer-informaci%C3%B3n-estructurada-de-tablas">Estraer información estructurada de tablas</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">html = <span class="hljs-string">&quot;&quot;&quot;
&lt;table&gt;
    &lt;tr&gt;&lt;th&gt;Nombre&lt;/th&gt;&lt;th&gt;Edad&lt;/th&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;Andrea&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;Carmela&lt;/td&gt;&lt;td&gt;30&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&quot;&quot;&quot;</span>

soup = BeautifulSoup(html, <span class="hljs-string">&quot;html.parser&quot;</span>)
tabla = soup.find(<span class="hljs-string">&quot;table&quot;</span>)
<span class="hljs-keyword">for</span> fila <span class="hljs-keyword">in</span> tabla.find_all(<span class="hljs-string">&quot;tr&quot;</span>):
    datos = fila.find_all(<span class="hljs-string">&quot;td&quot;</span>)
    <span class="hljs-keyword">if</span> datos:
        nombre, edad = datos
        <span class="hljs-built_in">print</span>(nombre.text, edad.text)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="62" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="62" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="biblioteca-scrapy">Biblioteca <code>Scrapy</code></h1>
<h3 id="extrayendo-informaci%C3%B3n-del-contenido-4">Extrayendo información del contenido</h3>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="63" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="63" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="sobre-esta-biblioteca-2">Sobre esta biblioteca</h1>
<p>Framework de Python diseñado específicamente para <em>crawling</em>  y_scraping_</p>
<ul>
<li>Diseñado para ser extensible y escalable</li>
<li>Escrito en Python y basado en <code>Twisted</code>, un framework de red asíncrono</li>
<li>Automatiza tareas como seguir enlaces, manejar sesiones y procesar datos</li>
<li>Integra herramientas para exportar a formatos comunes (e.g. JSON o CSV)</li>
</ul>
<p>Para instalarlo, simplemente ejecutamos:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-bash">$ pip install scrapy
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="64" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="64" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="estructura-de-un-proyecto-scrapy">Estructura de un proyecto Scrapy</h1>
<p>Un proyecto Scrapy se compone de varios elementos:</p>
<ul>
<li><strong>Spiders</strong>: Clases que definen cómo se extraen los datos de un sitio web</li>
<li><strong>Items</strong>: Clases que definen los datos que se van a extraer</li>
<li><strong>Pipelines</strong>: Clases que definen cómo se procesan los datos extraídos</li>
<li><strong>Settings</strong>: Configuración del proyecto</li>
<li><strong>Middlewares</strong>: Componentes que procesan las peticiones y respuestas</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="65" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="65" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="creaci%C3%B3n-de-un-proyecto-scrapy">Creación de un proyecto Scrapy</h1>
<p>Para crear un proyecto Scrapy, ejecutamos el siguiente comando:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-bash">$ scrapy startproject my_project
</code></pre>
<p>Esto creará una estructura de directorios como la siguiente:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-text">my_project/
    scrapy.cfg
    my_project/
        __init__.py
        items.py
        middlewares.py
        pipelines.py
        settings.py
        spiders/
            __init__.py
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="66" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="66" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="creaci%C3%B3n-de-un-spider">Creación de un <em>spider</em></h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> scrapy

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EjemploSpider</span>(scrapy.Spider):
    name = <span class="hljs-string">&quot;ejemplo&quot;</span>
    start_urls = [<span class="hljs-string">&quot;https://example.com&quot;</span>]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, response</span>):
        <span class="hljs-keyword">for</span> producto <span class="hljs-keyword">in</span> response.css(<span class="hljs-string">&quot;div.producto&quot;</span>):
            <span class="hljs-keyword">yield</span> {
                <span class="hljs-string">&quot;nombre&quot;</span>: producto.css(<span class="hljs-string">&quot;h3::text&quot;</span>).get(),
                <span class="hljs-string">&quot;precio&quot;</span>: producto.css(<span class="hljs-string">&quot;span.precio::text&quot;</span>).get(),
            }
</code></pre>
<p>Para ejecutarlo:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-bash">$ scrapy crawl ejemplo -o productos.json
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="67" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="67" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="biblioteca-selenium">Biblioteca <code>selenium</code></h1>
<h3 id="extrayendo-informaci%C3%B3n-del-contenido-5">Extrayendo información del contenido</h3>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="68" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="68" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="sobre-esta-biblioteca-3">Sobre esta biblioteca</h1>
<p>Nació como entorno de pruebas para aplicaciones web</p>
<ul>
<li>Su principal uso es el de automatizar comportamientos en navegadores web</li>
<li>Automatiza comportamientos en navegadores...</li>
</ul>
<p>En realidad, en la actualidad se usa como herramienta de scraping</p>
<ul>
<li>
<p>Es muy potente ya que trabaja directamente con navegadores</p>
<ul>
<li>Permite el uso de <em><strong>headless browsers</strong></em>, como <a href="http://phantomjs.org/">PhantomJS</a></li>
</ul>
</li>
<li>
<p>Es de las pocas formas que tenemos de interpretar código del lado del cliente en nuestro agente</p>
</li>
</ul>
<p>Más información en la <a href="http://www.seleniumhq.org/">página oficial</a> y en la documentación de <a href="http://selenium-python.readthedocs.io/">Python</a></p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="69" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="69" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-buscar-elementos-en-una-p%C3%A1gina">¿Cómo buscar elementos en una página?</h1>
<p>Se apoya en dos métodos principales:</p>
<ul>
<li><code>find_element</code>: Primer elemento que cumpla con el criterio de búsqueda</li>
<li><code>find_elements</code>: Lista de elementos que cumplen con el criterio de búsqueda</li>
</ul>
<p>Se pueden buscar por varios criterios:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By

driver = webdriver.Firefox()
driver.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)

element = driver.find_element(By.ID, <span class="hljs-string">&#x27;id&#x27;</span>)
element = driver.find_element(By.NAME, <span class="hljs-string">&#x27;name&#x27;</span>)
element = driver.find_elements(By.CLASS_NAME, <span class="hljs-string">&#x27;class&#x27;</span>)
element = driver.find_element(By.TAG_NAME, <span class="hljs-string">&#x27;tag&#x27;</span>)
element = driver.find_element(By.CSS_SELECTOR, <span class="hljs-string">&#x27;selector&#x27;</span>)
element = driver.find_element(By.XPATH, <span class="hljs-string">&#x27;xpath://etiqueta[@atributo=valor]&#x27;</span>)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="70" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="70" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFc%C3%B3mo-interactuar-con-los-elementos">¿Cómo interactuar con los elementos?</h1>
<p>Al emular el comporatamiento en un navegador, podemos interactuar con los elementos de la siguiente forma:</p>
<ul>
<li>Hacer click sobre un elemento<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">button.click()
</code></pre>
</li>
<li>Escribir sobre un elemento<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">text.send_keys(<span class="hljs-string">&#x27;texto&#x27;</span>)
</code></pre>
</li>
<li>Enviar un formulario<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">form.submit()
</code></pre>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="71" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="71" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="esperando-a-que-pasen-cosas">Esperando a que pasen cosas...</h1>
<p>Podemos esperar a que ocurran cosas en la página con el método <code>WebDriverWait</code>:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait
<span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC
<span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By

element = WebDriverWait(driver, <span class="hljs-number">10</span>).until(
  EC.presence_of_element_located((By.ID, <span class="hljs-string">&#x27;id&#x27;</span>))
)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="72" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="72" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="ejemplo-extraer-enlaces-de-una-p%C3%A1gina">Ejemplo: Extraer enlaces de una página</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By

driver = webdriver.Firefox()
driver.get(<span class="hljs-string">&#x27;https://httpbin.org/anything&#x27;</span>)

links = [
  a.get_attribute(<span class="hljs-string">&#x27;href&#x27;</span>)
  <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> driver.find_elements(By.TAG_NAME, <span class="hljs-string">&#x27;a&#x27;</span>)
]

<span class="hljs-built_in">print</span>(links)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="73" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="73" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="biblioteca-pyppeteer">Biblioteca <code>pyppeteer</code></h1>
<h3 id="extrayendo-informaci%C3%B3n-del-contenido-6">Extrayendo información del contenido</h3>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="74" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="74" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="sobre-esta-biblioteca-4">Sobre esta biblioteca</h1>
<p>Biblioteca para controlar un navegador web a través de la API de <a href="https://pptr.dev/">Puppeteer</a></p>
<ul>
<li>Es un clon de <code>puppeteer</code> de Node.js adaptado para Python</li>
</ul>
<p>Sus usos principales son:</p>
<ol>
<li>Scraping avanzado en páginas web que requieren JavaScript</li>
<li>Testing de interfaces web</li>
<li>Emulación de dispositivos móviles, condiciones de red, geolocalización, etc.</li>
</ol>
<p>Para instalarlo, simplemente ejecutamos:</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-bash">$ pip install pyppeteer
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="75" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="75" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="ejemplo-carga-de-una-p%C3%A1gina-y-extracci%C3%B3n-de-contenido">Ejemplo: Carga de una página y extracción de contenido</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> pyppeteer <span class="hljs-keyword">import</span> launch

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># Lanzamos el navegador</span>
    browser = <span class="hljs-keyword">await</span> launch(headless=<span class="hljs-literal">True</span>)
    page = <span class="hljs-keyword">await</span> browser.newPage()

    <span class="hljs-comment"># Vamos a la URL</span>
    <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&#x27;https://example.com&#x27;</span>)

    <span class="hljs-comment"># Extraemos el título de la página</span>
    title = <span class="hljs-keyword">await</span> page.title()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Título de la página: <span class="hljs-subst">{title}</span>&quot;</span>)

    <span class="hljs-comment"># Extraemos contenido de un elemento</span>
    content = <span class="hljs-keyword">await</span> page.querySelectorEval(<span class="hljs-string">&#x27;h1&#x27;</span>, <span class="hljs-string">&#x27;element =&gt; element.textContent&#x27;</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Contenido H1: <span class="hljs-subst">{content}</span>&quot;</span>)

    <span class="hljs-keyword">await</span> browser.close()

asyncio.run(main())
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="76" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="76" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="ejemplo-emulaci%C3%B3n-de-dispositivo-m%C3%B3vil">Ejemplo: Emulación de dispositivo móvil</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> pyppeteer <span class="hljs-keyword">import</span> launch

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    browser = <span class="hljs-keyword">await</span> launch()
    page = <span class="hljs-keyword">await</span> browser.newPage()

    <span class="hljs-comment"># Emulamos un dispositivo móvil</span>
    <span class="hljs-keyword">await</span> page.emulate({
        <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;iPhone X&#x27;</span>,
        <span class="hljs-string">&#x27;viewport&#x27;</span>: {<span class="hljs-string">&#x27;width&#x27;</span>: <span class="hljs-number">375</span>, <span class="hljs-string">&#x27;height&#x27;</span>: <span class="hljs-number">812</span>, <span class="hljs-string">&#x27;isMobile&#x27;</span>: <span class="hljs-literal">True</span>},
        <span class="hljs-string">&#x27;userAgent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (iPhone; CPU iPhone OS 13_3 ...&#x27;</span>,
    })

    <span class="hljs-comment"># Vamos a una página con el móvil</span>
    <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&#x27;https://example.com&#x27;</span>)
    <span class="hljs-keyword">await</span> page.screenshot({<span class="hljs-string">&#x27;path&#x27;</span>: <span class="hljs-string">&#x27;mobile_view.png&#x27;</span>})

    <span class="hljs-keyword">await</span> browser.close()

asyncio.run(main())
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="77" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="77" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="ejemplo-manejo-de-contenido-din%C3%A1mico">Ejemplo: Manejo de contenido dinámico</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> pyppeteer <span class="hljs-keyword">import</span> launch

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    browser = <span class="hljs-keyword">await</span> launch()
    page = <span class="hljs-keyword">await</span> browser.newPage()

    <span class="hljs-comment"># Vamos a una página que carga contenido dinámico</span>
    <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&#x27;https://example.com&#x27;</span>)

    <span class="hljs-comment"># Esperamos a que un elemento específico esté cargado</span>
    <span class="hljs-keyword">await</span> page.waitForSelector(<span class="hljs-string">&#x27;.dynamic-content&#x27;</span>)

    <span class="hljs-comment"># Extraemos contenido dinámico</span>
    content = <span class="hljs-keyword">await</span> page.evaluate(<span class="hljs-string">&quot;&quot;&quot;() =&gt; {
        return document.querySelector(&#x27;.dynamic-content&#x27;).innerText;
    }&quot;&quot;&quot;</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Contenido dinámico: <span class="hljs-subst">{content}</span>&quot;</span>)

    <span class="hljs-keyword">await</span> browser.close()

asyncio.run(main())
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="78" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="78" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="ejemplo-4---rellenar-formularios-y-enviar-datos">Ejemplo 4 - Rellenar formularios y enviar datos</h1>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> pyppeteer <span class="hljs-keyword">import</span> launch

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    browser = <span class="hljs-keyword">await</span> launch()
    page = <span class="hljs-keyword">await</span> browser.newPage()

    <span class="hljs-comment"># Vamos a un formulario</span>
    <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&#x27;https://example-form.com&#x27;</span>)

    <span class="hljs-comment"># Completamos campos del formulario y enviamos</span>
    <span class="hljs-keyword">await</span> page.<span class="hljs-built_in">type</span>(<span class="hljs-string">&#x27;#username&#x27;</span>, <span class="hljs-string">&#x27;mi_usuario&#x27;</span>)
    <span class="hljs-keyword">await</span> page.click(<span class="hljs-string">&#x27;#submit&#x27;</span>)

    <span class="hljs-comment"># Esperamos la carga de la siguiente página</span>
    <span class="hljs-keyword">await</span> page.waitForNavigation()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Formulario enviado y página cargada&quot;</span>)

    <span class="hljs-keyword">await</span> browser.close()

asyncio.run(main())
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="79" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="79" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="unos-pocos-goodies">Unos pocos goodies</h1>
<p>Deshabilitar características que identifican scripts automatizados</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">await</span> page.evaluateOnNewDocument(<span class="hljs-string">&quot;&quot;&quot;() =&gt; {
    Object.defineProperty(navigator, &#x27;webdriver&#x27;, {get: () =&gt; undefined});
}&quot;&quot;&quot;</span>)
</code></pre>
<p>Tomar capturas de pantalla en puntos críticos para validar el scraping</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">await</span> page.screenshot({<span class="hljs-string">&#x27;path&#x27;</span>: <span class="hljs-string">&#x27;debug.png&#x27;</span>})
</code></pre>
<p>Desactivar la carga de imágenes o recursos pesados para acelerar el scraping</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">await</span> page.setRequestInterception(<span class="hljs-literal">True</span>)
page.on(<span class="hljs-string">&#x27;request&#x27;</span>, <span class="hljs-keyword">lambda</span> req: req.continue_() <span class="hljs-keyword">if</span> req.resourceType != <span class="hljs-string">&#x27;image&#x27;</span> <span class="hljs-keyword">else</span> req.abort())
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="80" data-paginate="true" data-class="section" data-theme="styles" lang="POSIX" class="section" data-marpit-pagination="80" style="--paginate:true;--class:section;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="t%C3%A9cnicas-avanzadas">Técnicas avanzadas</h1>
<h3 id="y-buenas-pr%C3%A1cticas">(y buenas prácticas)</h3>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="81" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="81" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="de-qu%C3%A9-va-esto">De qué va esto</h1>
<p>Hasta ahora hemos visto cómo extraer información de una página web</p>
<ul>
<li>Pero no todo son flores y alegría</li>
</ul>
<p>Vremos algunas técnicas para superar los <strong>problemas más comunes</strong> en <em>scraping</em></p>
<ul>
<li>Evitar bloqueos de IP</li>
<li>Manejar <em>captchas</em> y contenido dinámico</li>
<li>Optimizar el rendimiento en <em>scraping</em> masivo</li>
</ul>
<p>También hablaremos de <strong>buenas prácticas</strong> en nuestros proyectos</p>
<ul>
<li>Sobre todo para asegurar eficiencia, escalabilidad y sostenibilidad</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="82" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="82" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="%C2%BFcu%C3%A1les-son-esos-problemas-m%C3%A1s-comunes">¿Cuáles son esos problemas más comunes?</h1>
<p>En realidad problemas hay muchos, porque esto es como el gato y el ratón</p>
<ol>
<li>Hoy encontramos una técnica para evitar bloqueos</li>
<li>Mañana los servidores web se adaptan y nos bloquean de nuevo</li>
<li><code>GOTO 1</code></li>
</ol>
<p>Pero hay algunos problemas que son comunes, y no solo son de bloqueo:</p>
<div class="columns">
<div>
<h3 id="bloqueo">Bloqueo</h3>
<ul>
<li>Filtrado de IP sospechosas</li>
<li><em>Rate limiting</em>/<em>captchas</em></li>
</ul>
</div>
<div>
<h3 id="dinamismo">Dinamismo</h3>
<ul>
<li>AJAX o <em>WebSockets</em> (asíncronos)</li>
<li>JavaScript</li>
</ul>
</div>
<div>
<h3 id="muchos-datos">Muchos datos</h3>
<ul>
<li>Necesidad de paralelismo y proceso</li>
<li>Almacenamiento</li>
</ul>
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="83" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="83" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="restricciones-de-rate-limiting-i">Restricciones de <em>rate limiting</em> (I)</h1>
<p>Demasiadas solicitudes en poco tiempo puede activar bloqueos</p>
<ul>
<li>Para ello podemos implementar tiempos de espera entre solicitudes</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> requests

<span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:
    response = requests.get(url)
    <span class="hljs-built_in">print</span>(response.status_code)
    time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># Esperar 1 segundo</span>
</code></pre>
<p>Si implementamos un tiempo de espera aleatorio, mejor</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="84" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="84" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="restricciones-de-rate-limiting-ii">Restricciones de <em>rate limiting</em> (II)</h1>
<p>Hay herramientas específicas para ello, como <a href="https://pypi.org/project/ratelimit/"><code>ratelimit</code></a></p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> ratelimit <span class="hljs-keyword">import</span> limits, sleep_and_retry
<span class="hljs-keyword">import</span> requests

<span class="hljs-meta">@sleep_and_retry</span>
<span class="hljs-meta">@limits(<span class="hljs-params">calls=<span class="hljs-number">10</span>, period=<span class="hljs-number">60</span></span>)  </span><span class="hljs-comment"># Limitar a 10 solicitudes por minuto</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">mega_request</span>(<span class="hljs-params">url</span>):
    response = requests.get(url)
    <span class="hljs-keyword">return</span> response.text

urls = [<span class="hljs-string">&quot;https://example.com&quot;</span>] * <span class="hljs-number">15</span>  <span class="hljs-comment"># Más solicitudes que el límite</span>
<span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:
    <span class="hljs-keyword">try</span>:
        <span class="hljs-built_in">print</span>(mega_request(url))
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error: <span class="hljs-subst">{e}</span>&quot;</span>)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="85" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="85" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="resoluci%C3%B3n-de-captchas">Resolución de <em>captchas</em></h1>
<p>Método para evitar el acceso a según que sitios de sitios web</p>
<div class="columns">
<div>
<h3 id="flujo-b%C3%A1sico">Flujo básico</h3>
<ol>
<li>Descargar el captcha como imagen</li>
<li>Enviarlo al servicio externo</li>
<li>Recibir el token como respuesta</li>
</ol>
<p>Porque lo normal es usar servicios</p>
<ul>
<li>(e.g. <a href="https://2captcha.com/">2Captcha</a> o <a href="https://anti-captcha.com/es">Anti-Captcha</a>)</li>
</ul>
</div>
<div>
<h3 id="ejemplo-con-2captcha">Ejemplo con 2Captcha</h3>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> requests

APIKEY = <span class="hljs-string">&quot;Api key de 2Captcha&quot;</span>
captcha_url = <span class="hljs-string">&quot;https://example.com/captcha.jpg&quot;</span>

response = requests.post(<span class="hljs-string">&quot;http://2captcha.com/in.php&quot;</span>, data={
    <span class="hljs-string">&quot;key&quot;</span>: APIKEY,
    <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;base64&quot;</span>,
    <span class="hljs-string">&quot;body&quot;</span>: requests.get(captcha_url).content.encode(<span class="hljs-string">&quot;base64&quot;</span>)
})

c_id = response.text.split(<span class="hljs-string">&quot;|&quot;</span>)[<span class="hljs-number">1</span>]
url = <span class="hljs-string">&quot;http://2captcha.com/res.php?key={APIKEY}&amp;action=get&amp;id={c_id}&quot;</span>

solution = <span class="hljs-literal">None</span>
<span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> solution:
    result = requests.get(url)
    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;OK&quot;</span> <span class="hljs-keyword">in</span> result.text:
        solution = result.text.split(<span class="hljs-string">&quot;|&quot;</span>)[<span class="hljs-number">1</span>]
</code></pre>
</div>
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="86" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="86" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="rotaci%C3%B3n-de-proxies-para-evitar-bloqueos-por-ip-i">Rotación de <em>proxies</em> para evitar bloqueos por IP (I)</h1>
<p>Diferentes <em>proxies</em> para que las solicitudes lleguen de diferentes ubicaciones</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> requests

proxies = [
    {<span class="hljs-string">&quot;http&quot;</span>: <span class="hljs-string">&quot;http://px1.example.com:8080&quot;</span>, <span class="hljs-string">&quot;https&quot;</span>: <span class="hljs-string">&quot;https://px1.example.com:8080&quot;</span>},
    {<span class="hljs-string">&quot;http&quot;</span>: <span class="hljs-string">&quot;http://px2.example.com:8080&quot;</span>, <span class="hljs-string">&quot;https&quot;</span>: <span class="hljs-string">&quot;https://px2.example.com:8080&quot;</span>}
]
<span class="hljs-comment"># Rotar proxies en cada petición</span>
<span class="hljs-keyword">for</span> proxy <span class="hljs-keyword">in</span> proxies:
    <span class="hljs-keyword">try</span>:
        response = requests.get(<span class="hljs-string">&quot;https://example.com&quot;</span>, proxies=proxy, timeout=<span class="hljs-number">5</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Respuesta desde <span class="hljs-subst">{proxy[<span class="hljs-string">&#x27;http&#x27;</span>]}</span>: <span class="hljs-subst">{response.status_code}</span>&quot;</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error con proxy <span class="hljs-subst">{proxy[<span class="hljs-string">&#x27;http&#x27;</span>]}</span>: <span class="hljs-subst">{e}</span>&quot;</span>)
</code></pre>
<p><strong>Recomendación</strong>: Mantener sesiones, usar selección aleatoria y paralelismo</p>
<ul>
<li>Los procesos secuenciales son los más fáciles de detectar</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="87" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="87" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="rotaci%C3%B3n-de-proxies-para-evitar-bloqueos-por-ip-ii">Rotación de <em>proxies</em> para evitar bloqueos por IP (II)</h1>
<p>Ahora un ejemplo con <code>Scrapy</code>:</p>
<ol>
<li>Configuración del fichero <code>settings.py</code>:<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">DOWNLOADER_MIDDLEWARES = {
 <span class="hljs-string">&#x27;scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware&#x27;</span>: <span class="hljs-number">110</span>,
 <span class="hljs-string">&#x27; my_project.middlewares.ProxyMiddleware&#x27;</span>: <span class="hljs-number">100</span>,
}
</code></pre>
</li>
<li>Implementación del <em>middleware</em>:<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> random

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyMiddleware</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_request</span>(<span class="hljs-params">self, request, spider</span>):
        request.meta[<span class="hljs-string">&#x27;proxy&#x27;</span>] = random.choice(spider.settings.get(<span class="hljs-string">&#x27;PROXIES&#x27;</span>))
</code></pre>
</li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="88" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="88" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="rotaci%C3%B3n-de-proxies-para-evitar-bloqueos-por-ip-iii">Rotación de <em>proxies</em> para evitar bloqueos por IP (III)</h1>
<p>Podemos usar servicios como <code>ScraperAPI</code> o <code>BrightData</code> para evitar bloqueos</p>
<ul>
<li>Ofrecen <em>proxies</em> rotativos y <em>captchas</em> resueltos</li>
<li>También ofrecen <em>headless browsers</em> para evitar <em>captchas</em> y contenido dinámico</li>
</ul>
<div class="columns">
<div>
<h3 id="scraperapi">ScraperAPI</h3>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> requests

<span class="hljs-comment"># Configuración</span>
SCRAPERAPI_KEY = <span class="hljs-string">&quot;API_KEY&quot;</span>
BASE_URL = <span class="hljs-string">&quot;http://api.scraperapi.com&quot;</span>
API_ENDPOINT = <span class="hljs-string">f&quot;<span class="hljs-subst">{BASE_URL}</span>?api_key=<span class="hljs-subst">{SCRAPERAPI_KEY}</span>&amp;url=&quot;</span>

<span class="hljs-comment"># URL del sitio a scrapear</span>
target_url = <span class="hljs-string">&quot;https://example.com&quot;</span>

<span class="hljs-comment"># Hacemos una solicitud</span>
response = requests.get(API_ENDPOINT + target_url)
<span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:
    <span class="hljs-built_in">print</span>(response.text)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error: <span class="hljs-subst">{response.status_code}</span>&quot;</span>)
</code></pre>
</div>
<div>
<h3 id="brightdata">BrightData</h3>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> requests

<span class="hljs-comment"># Configuración</span>
BD_USER = <span class="hljs-string">&quot;USERNAME&quot;</span>
BD_PASSWORD = <span class="hljs-string">&quot;PASSWORD&quot;</span>
proxies = {
    <span class="hljs-string">&quot;http&quot;</span>: <span class="hljs-string">f&quot;http://<span class="hljs-subst">{BD_USER}</span>:<span class="hljs-subst">{BD_PASSWORD}</span>@zproxy.lum-superproxy.io:22225&quot;</span>,
    <span class="hljs-string">&quot;https&quot;</span>: <span class="hljs-string">f&quot;http://<span class="hljs-subst">{BD_USER}</span>:<span class="hljs-subst">{BD_PASSWORD}</span>@zproxy.lum-superproxy.io:22225&quot;</span>
}

<span class="hljs-comment"># URL del sitio a scrapear</span>
target_url = <span class="hljs-string">&quot;https://example.com&quot;</span>

<span class="hljs-comment"># Hacemos una solicitud</span>
response = requests.get(target_url, proxies=proxies)
<span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:
    <span class="hljs-built_in">print</span>(response.text)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error: <span class="hljs-subst">{response.status_code}</span>&quot;</span>)
</code></pre>
</div>
</div>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="89" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="89" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="rotaci%C3%B3n-de-user-agent-para-evitar-bloqueos">Rotación de <code>User-Agent</code> para evitar bloqueos</h1>
<p>Es muy común bloquear peticiones de clientes que no tienen un <em>User-Agent</em> válido</p>
<ul>
<li>Tan fácil como cambiarlo en cada petición, pero estos cambian con el tiempo
<ul>
<li>Y los obsoletos son carne de cañón para los bloqueos</li>
</ul>
</li>
<li>Podemos usar la biblioteca <code>fake_useragent</code> para obtener <em>User-Agents</em> aleatorios</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> fake_useragent <span class="hljs-keyword">import</span> UserAgent
<span class="hljs-keyword">import</span> requests

ua = UserAgent()
headers = {<span class="hljs-string">&quot;User-Agent&quot;</span>: ua.random}

response = requests.get(<span class="hljs-string">&quot;https://example.com&quot;</span>, headers=headers)
<span class="hljs-built_in">print</span>(response.status_code)
</code></pre>
<p><strong>Recomendación</strong>: Mantener el mismo <em>User-Agent</em> durante una sesión</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="90" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="90" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="sobre-el-contenido-din%C3%A1mico">Sobre el contenido dinámico</h1>
<p>El contenido dinámico es aquel que aparece tras la carga de la página</p>
<ul>
<li>Diferentes formas: <em>AJAX</em>, <em>WebSockets</em>, <em>JavaScript</em>, etc.</li>
<li>Ejemplo: Resultados de búsqueda que aparecen al desplazarse (i.e. <em>infinite scroll</em>)</li>
</ul>
<p>Las soluciones son variadas, pero las más comunes son:</p>
<ul>
<li>Usar herramientas que interactúen con JavaScript:
<ul>
<li>Navegadores automatizados: Selenium, Playwright</li>
<li><code>Scrapy</code> con middlewares para manejar contenido dinámico</li>
</ul>
</li>
<li>Análisis de peticiones de red para <strong>acceder directamente a las API subyacentes</strong></li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="91" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="91" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="automatizaci%C3%B3n-de-navegadores-con-selenium-i">Automatización de navegadores con Selenium (I)</h1>
<p>Esperaremos unos segundos para que se cargue la página</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By

<span class="hljs-comment"># Configuración del navegador</span>
driver = webdriver.Chrome()
driver.get(<span class="hljs-string">&quot;https://example.com/dinamico&quot;</span>)

<span class="hljs-comment"># Esperar a que el contenido dinámico cargue</span>
driver.implicitly_wait(<span class="hljs-number">10</span>)
elementos = driver.find_elements(By.CLASS_NAME, <span class="hljs-string">&quot;resultado&quot;</span>)

<span class="hljs-keyword">for</span> elemento <span class="hljs-keyword">in</span> elementos:
    <span class="hljs-built_in">print</span>(elemento.text)

driver.quit()
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="92" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="92" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="automatizaci%C3%B3n-de-navegadores-con-selenium-ii">Automatización de navegadores con Selenium (II)</h1>
<p>Algunas páginas tardan más en cargar el contenido dinámico</p>
<ul>
<li>Podemos esperar a que un elemento específico aparezca en la página</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By
<span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait
<span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC

driver = webdriver.Chrome()
driver.get(<span class="hljs-string">&quot;https://example.com/dinamico&quot;</span>)

WebDriverWait(driver, <span class="hljs-number">20</span>).until(EC.presence_of_element_located((By.ID, <span class="hljs-string">&quot;res&quot;</span>)))
resultados = driver.find_elements((By.ID, <span class="hljs-string">&quot;res&quot;</span>))
<span class="hljs-keyword">for</span> resultado <span class="hljs-keyword">in</span> resultados:
    <span class="hljs-built_in">print</span>(resultado.text)

driver.quit()
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="93" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="93" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="automatizaci%C3%B3n-de-navegadores-con-selenium-iii">Automatización de navegadores con Selenium (III)</h1>
<p>Muchas páginas cargan contenido dinámico al ir hacia abajo (e.g. <em>infinite scroll</em>)</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By

driver = webdriver.Chrome()
driver.get(<span class="hljs-string">&quot;https://example.com/infinite-scroll&quot;</span>)

<span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):  <span class="hljs-comment"># Nos desplazamos hacia abajo 5 veces</span>
    driver.execute_script(<span class="hljs-string">&quot;window.scrollTo(0, document.body.scrollHeight);&quot;</span>)
    time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># Esperamos a que se cargue el nuevo contenido</span>

resultados = driver.find_elements(By.ID, <span class="hljs-string">&quot;res&quot;</span>)
<span class="hljs-keyword">for</span> resultado <span class="hljs-keyword">in</span> resultados:
    <span class="hljs-built_in">print</span>(resultado.text)

driver.quit()
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="94" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="94" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 is="marp-h1" data-auto-scaling id="automatizaci%C3%B3n-de-navegadores-con-selenium-iv">Automatización de navegadores con Selenium (IV)</h1>
<p>Las web dinámicas suelen hacer uso de API para cargar contenido</p>
<ul>
<li>Podemos cogerlo de ahí directamente, suele ser más rápido y estable</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> requests

<span class="hljs-comment"># Solicitud directa a la API interna</span>
url = <span class="hljs-string">&quot;https://example.com/api/resultados&quot;</span>
params = {<span class="hljs-string">&quot;page&quot;</span>: <span class="hljs-number">1</span>}
response = requests.get(url, params=params)
data = response.json()

<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data[<span class="hljs-string">&quot;resultados&quot;</span>]:
    <span class="hljs-built_in">print</span>(item[<span class="hljs-string">&quot;nombre&quot;</span>])
</code></pre>
<p>Sí, se puede hacer con selenium, pero no hace falta matar moscas a cañonazos</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="95" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="95" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="problemas-con-el-scraping-secuencial">Problemas con el <em>scraping</em> secuencial</h1>
<p>El <em>scraping</em> secuencial es lento y poco eficiente:</p>
<ul>
<li>Prácticamente todos los proyectos requieren muchas solicitudes</li>
<li>La memoria se llena si no se procesan los datos de inmediato</li>
<li>Incurrimos en riesgo de bloqueo si hacemos muchas solicitudes desde una sola IP</li>
</ul>
<p>¿Cómo podemos solucionar (o al menos aliviar un poco) esto?</p>
<ul>
<li>Procesamiento paralelo
<ul>
<li>Básicamente, realizar múltiples peticiones simultáneamente</li>
</ul>
</li>
<li>Procesamiento en tiempo real
<ul>
<li>Procesar los datos a medida que están disponibles, evitando la acumulación</li>
</ul>
</li>
<li>Almacenamiento escalable
<ul>
<li>Guardar los datos en un sistema de almacenamiento adecuado (e.g. mongoDB)</li>
</ul>
</li>
</ul>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="96" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="96" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="procesamiento-paralelo">Procesamiento paralelo</h1>
<p>Podemos usar <code>concurrent.futures</code> para realizar peticiones en paralelo</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_url</span>(<span class="hljs-params">url</span>):
    response = requests.get(url)
    <span class="hljs-keyword">return</span> {<span class="hljs-string">&quot;url&quot;</span>: url, <span class="hljs-string">&quot;status_code&quot;</span>: response.status_code}

urls = [<span class="hljs-string">&quot;https://example.com&quot;</span>] * <span class="hljs-number">10</span>
<span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">5</span>) <span class="hljs-keyword">as</span> ex:  <span class="hljs-comment"># Ajustar para no saturar</span>
    results = ex.<span class="hljs-built_in">map</span>(get_url, urls)

<span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> results:
    <span class="hljs-built_in">print</span>(result)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="97" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="97" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="scraping-masivo-con-scrapy-i"><em>Scraping</em> masivo con <code>Scrapy</code> (I)</h1>
<p>Configuración para paralelismo eficiente (<code>settings.py</code>):</p>
<ol>
<li>
<p>Aumentar concurrencia en el agente</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python">CONCURRENT_REQUESTS = <span class="hljs-number">100</span>
DOWNLOAD_DELAY = <span class="hljs-number">0.25</span>  <span class="hljs-comment"># Reducir tasa de peticiones al servidor</span>
</code></pre>
</li>
<li>
<p>Añadir <em>middlewares</em> para manejar contenido dinámico</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"> DOWNLOADER_MIDDLEWARES = {
     <span class="hljs-string">&#x27;scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware&#x27;</span>: <span class="hljs-number">110</span>,
     <span class="hljs-string">&#x27;my_project.middlewares.ProxyMiddleware&#x27;</span>: <span class="hljs-number">100</span>,
     <span class="hljs-string">&#x27;scrapy.downloadermiddlewares.useragent.UserAgentMiddleware&#x27;</span>: <span class="hljs-literal">None</span>,
     <span class="hljs-string">&#x27;scrapy_user_agents.middlewares.RandomUserAgentMiddleware&#x27;</span>: <span class="hljs-number">400</span>,
 }
</code></pre>
</li>
</ol>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="98" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="98" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="scraping-masivo-con-scrapy-ii"><em>Scraping</em> masivo con <code>Scrapy</code> (II)</h1>
<p>Ahora el agente <code>Scrapy</code> puede manejar muchas solicitudes simultáneas</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> scrapy

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MasivoSpider</span>(scrapy.Spider):
    name = <span class="hljs-string">&quot;masivo&quot;</span>
    start_urls = [<span class="hljs-string">&quot;https://example.com&quot;</span>]

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, response</span>):
        <span class="hljs-keyword">for</span> producto <span class="hljs-keyword">in</span> response.css(<span class="hljs-string">&quot;div.producto&quot;</span>):
            <span class="hljs-keyword">yield</span> {
                <span class="hljs-string">&quot;nombre&quot;</span>: producto.css(<span class="hljs-string">&quot;h3::text&quot;</span>).get(),
                <span class="hljs-string">&quot;precio&quot;</span>: producto.css(<span class="hljs-string">&quot;span.precio::text&quot;</span>).get(),
            }
        next_page = response.css(<span class="hljs-string">&quot;a.next::attr(href)&quot;</span>).get()
        <span class="hljs-keyword">if</span> next_page:
            <span class="hljs-keyword">yield</span> response.follow(next_page, <span class="hljs-variable language_">self</span>.parse)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="99" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="99" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="procesamiento-en-tiempo-real">Procesamiento en tiempo real</h1>
<p>Podemos minimizar le uso de memoria procesando los datos a medida que llegan</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">scrape_data</span>():
    urls = [<span class="hljs-string">&quot;https://example.com/page1&quot;</span>, <span class="hljs-string">&quot;https://example.com/page2&quot;</span>]
    <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:
        response = requests.get(url)
        <span class="hljs-keyword">yield</span> {<span class="hljs-string">&quot;url&quot;</span>: url, <span class="hljs-string">&quot;status_code&quot;</span>: response.status_code}

<span class="hljs-keyword">for</span> data <span class="hljs-keyword">in</span> scrape_data():
    <span class="hljs-built_in">print</span>(data)
</code></pre>
<p>El uso de generadores (<code>yield</code>) permite procesar los datos a medida que llegan</p>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="100" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="100" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="almacenamiento-escalable-i">Almacenamiento escalable (I)</h1>
<p>Podemos conectar con una base de datos moderna como <code>MongoDB</code> para almacenar los datos</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> pymongo <span class="hljs-keyword">import</span> MongoClient

client = MongoClient(<span class="hljs-string">&quot;mongodb://localhost:27017/&quot;</span>)
db = client[<span class="hljs-string">&quot;scraping_db&quot;</span>]
collection = db[<span class="hljs-string">&quot;productos&quot;</span>]

<span class="hljs-comment"># Insertar datos</span>
producto = {<span class="hljs-string">&quot;nombre&quot;</span>: <span class="hljs-string">&quot;Producto 1&quot;</span>, <span class="hljs-string">&quot;precio&quot;</span>: <span class="hljs-number">10</span>}
collection.insert_one(producto)

<span class="hljs-comment"># Consultar datos</span>
<span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> collection.find():
    <span class="hljs-built_in">print</span>(doc)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="101" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="101" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="almacenamiento-escalable-ii">Almacenamiento escalable (II)</h1>
<p>MongoDB no es la única opción, hay muchas otras como por ejemplo Redis</p>
<ul>
<li>BBDD en memoria <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.181ex" role="img" focusable="false" viewBox="0 -511 1000 522"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"></path></g></g></g></svg></mjx-container> Útil para almacenamiento temporal, colas de tarea y caché</li>
</ul>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">import</span> redis

<span class="hljs-comment"># Conectar a Redis</span>
r = redis.Redis(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)

<span class="hljs-comment"># Guardar datos</span>
r.<span class="hljs-built_in">set</span>(<span class="hljs-string">&quot;producto_1&quot;</span>, <span class="hljs-string">&quot;Producto 1: $10&quot;</span>)
<span class="hljs-built_in">print</span>(r.get(<span class="hljs-string">&quot;producto_1&quot;</span>).decode(<span class="hljs-string">&quot;utf-8&quot;</span>))
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="102" data-paginate="true" data-theme="styles" lang="POSIX" data-marpit-pagination="102" style="--paginate:true;--theme:styles;" data-marpit-pagination-total="103">
<h1 id="ejemplo-scraper-en-paralelo-con-mongodb">Ejemplo: Scraper en paralelo con MongoDB</h1>
<p>Un ejemplo de extracción y almacenamiento de datos de múltiples páginas</p>
<pre is="marp-pre" data-auto-scaling="downscale-only"><code class="language-python"><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> pymongo <span class="hljs-keyword">import</span> MongoClient

client = MongoClient(<span class="hljs-string">&quot;mongodb://localhost:27017/&quot;</span>)  <span class="hljs-comment"># Configurar MongoDB</span>
db = client[<span class="hljs-string">&quot;scraping_db&quot;</span>]
collection = db[<span class="hljs-string">&quot;productos&quot;</span>]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">scrape_and_store</span>(<span class="hljs-params">url</span>):  <span class="hljs-comment"># Función de scraping</span>
    response = requests.get(url)
    <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:
        data = {<span class="hljs-string">&quot;url&quot;</span>: url, <span class="hljs-string">&quot;content&quot;</span>: response.text}
        collection.insert_one(data)

urls = [<span class="hljs-string">&quot;https://example.com/page1&quot;</span>, <span class="hljs-string">&quot;https://example.com/page2&quot;</span>, <span class="hljs-string">&quot;https://example.com/page2&quot;</span>]

<span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">5</span>) <span class="hljs-keyword">as</span> executor:  <span class="hljs-comment"># Procesamiento en paralelo</span>
    executor.<span class="hljs-built_in">map</span>(scrape_and_store, urls)

<span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Scraping y almacenamiento completados.&quot;</span>)
</code></pre>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="103" data-paginate="true" data-class="endpage" data-theme="styles" lang="POSIX" class="endpage" data-marpit-pagination="103" style="--paginate:true;--class:endpage;--theme:styles;" data-marpit-pagination-total="103">
<p>Gracias</p>
</section>
<script>!function(){"use strict";const t={h1:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"1"},style:"display: block; font-size: 2em; margin-block-start: 0.67em; margin-block-end: 0.67em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h2:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"2"},style:"display: block; font-size: 1.5em; margin-block-start: 0.83em; margin-block-end: 0.83em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h3:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"3"},style:"display: block; font-size: 1.17em; margin-block-start: 1em; margin-block-end: 1em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h4:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"4"},style:"display: block; margin-block-start: 1.33em; margin-block-end: 1.33em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h5:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"5"},style:"display: block; font-size: 0.83em; margin-block-start: 1.67em; margin-block-end: 1.67em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},h6:{proto:()=>HTMLHeadingElement,attrs:{role:"heading","aria-level":"6"},style:"display: block; font-size: 0.67em; margin-block-start: 2.33em; margin-block-end: 2.33em; margin-inline-start: 0px; margin-inline-end: 0px; font-weight: bold;"},span:{proto:()=>HTMLSpanElement},pre:{proto:()=>HTMLElement,style:"display: block; font-family: monospace; white-space: pre; margin: 1em 0; --marp-auto-scaling-white-space: pre;"}},e="data-marp-auto-scaling-wrapper",i="data-marp-auto-scaling-svg",n="data-marp-auto-scaling-container";class s extends HTMLElement{container;containerSize;containerObserver;svg;svgComputedStyle;svgPreserveAspectRatio="xMinYMid meet";wrapper;wrapperSize;wrapperObserver;constructor(){super();const t=t=>([e])=>{const{width:i,height:n}=e.contentRect;this[t]={width:i,height:n},this.updateSVGRect()};this.attachShadow({mode:"open"}),this.containerObserver=new ResizeObserver(t("containerSize")),this.wrapperObserver=new ResizeObserver(((...e)=>{t("wrapperSize")(...e),this.flushSvgDisplay()}))}static get observedAttributes(){return["data-downscale-only"]}connectedCallback(){this.shadowRoot.innerHTML=`\n<style>\n  svg[${i}] { display: block; width: 100%; height: auto; vertical-align: top; }\n  span[${n}] { display: table; white-space: var(--marp-auto-scaling-white-space, nowrap); width: max-content; }\n</style>\n<div ${e}>\n  <svg part="svg" ${i}>\n    <foreignObject><span ${n}><slot></slot></span></foreignObject>\n  </svg>\n</div>\n    `.split(/\n\s*/).join(""),this.wrapper=this.shadowRoot.querySelector(`div[${e}]`)??void 0;const t=this.svg;this.svg=this.wrapper?.querySelector(`svg[${i}]`)??void 0,this.svg!==t&&(this.svgComputedStyle=this.svg?window.getComputedStyle(this.svg):void 0),this.container=this.svg?.querySelector(`span[${n}]`)??void 0,this.observe()}disconnectedCallback(){this.svg=void 0,this.svgComputedStyle=void 0,this.wrapper=void 0,this.container=void 0,this.observe()}attributeChangedCallback(){this.observe()}flushSvgDisplay(){const{svg:t}=this;t&&(t.style.display="inline",requestAnimationFrame((()=>{t.style.display=""})))}observe(){this.containerObserver.disconnect(),this.wrapperObserver.disconnect(),this.wrapper&&this.wrapperObserver.observe(this.wrapper),this.container&&this.containerObserver.observe(this.container),this.svgComputedStyle&&this.observeSVGStyle(this.svgComputedStyle)}observeSVGStyle(t){const e=()=>{const i=(()=>{const e=t.getPropertyValue("--preserve-aspect-ratio");if(e)return e.trim();return`x${(({textAlign:t,direction:e})=>{if(t.endsWith("left"))return"Min";if(t.endsWith("right"))return"Max";if("start"===t||"end"===t){let i="rtl"===e;return"end"===t&&(i=!i),i?"Max":"Min"}return"Mid"})(t)}YMid meet`})();i!==this.svgPreserveAspectRatio&&(this.svgPreserveAspectRatio=i,this.updateSVGRect()),t===this.svgComputedStyle&&requestAnimationFrame(e)};e()}updateSVGRect(){let t=Math.ceil(this.containerSize?.width??0);const e=Math.ceil(this.containerSize?.height??0);void 0!==this.dataset.downscaleOnly&&(t=Math.max(t,this.wrapperSize?.width??0));const i=this.svg?.querySelector(":scope > foreignObject");if(i?.setAttribute("width",`${t}`),i?.setAttribute("height",`${e}`),this.svg&&(this.svg.setAttribute("viewBox",`0 0 ${t} ${e}`),this.svg.setAttribute("preserveAspectRatio",this.svgPreserveAspectRatio),this.svg.style.height=t<=0||e<=0?"0":""),this.container){const t=this.svgPreserveAspectRatio.toLowerCase();this.container.style.marginLeft=t.startsWith("xmid")||t.startsWith("xmax")?"auto":"0",this.container.style.marginRight=t.startsWith("xmi")?"auto":"0"}}}const r=(t,{attrs:e={},style:i})=>class extends t{constructor(...t){super(...t);for(const[t,i]of Object.entries(e))this.hasAttribute(t)||this.setAttribute(t,i);this._shadow()}static get observedAttributes(){return["data-auto-scaling"]}connectedCallback(){this._update()}attributeChangedCallback(){this._update()}_shadow(){if(!this.shadowRoot)try{this.attachShadow({mode:"open"})}catch(t){if(!(t instanceof Error&&"NotSupportedError"===t.name))throw t}return this.shadowRoot}_update(){const t=this._shadow();if(t){const e=i?`<style>:host { ${i} }</style>`:"";let n="<slot></slot>";const{autoScaling:s}=this.dataset;if(void 0!==s){n=`<marp-auto-scaling exportparts="svg:auto-scaling" ${"downscale-only"===s?"data-downscale-only":""}>${n}</marp-auto-scaling>`}t.innerHTML=e+n}}};let o;const a=Symbol();let l;const c="marpitSVGPolyfill:setZoomFactor,",d=Symbol(),h=Symbol();const g=()=>{const t="Apple Computer, Inc."===navigator.vendor,e=t?[u]:[],i={then:e=>(t?(async()=>{if(void 0===l){const t=document.createElement("canvas");t.width=10,t.height=10;const e=t.getContext("2d"),i=new Image(10,10),n=new Promise((t=>{i.addEventListener("load",(()=>t()))}));i.crossOrigin="anonymous",i.src="data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2210%22%20height%3D%2210%22%20viewBox%3D%220%200%201%201%22%3E%3CforeignObject%20width%3D%221%22%20height%3D%221%22%20requiredExtensions%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%3Cdiv%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20style%3D%22width%3A%201px%3B%20height%3A%201px%3B%20background%3A%20red%3B%20position%3A%20relative%22%3E%3C%2Fdiv%3E%3C%2FforeignObject%3E%3C%2Fsvg%3E",await n,e.drawImage(i,0,0),l=e.getImageData(5,5,1,1).data[3]<128}return l})().then((t=>{null==e||e(t?[u]:[])})):null==e||e([]),i)};return Object.assign(e,i)};let p,m;function u(t){const e="object"==typeof t&&t.target||document,i="object"==typeof t?t.zoom:t;window[h]||(Object.defineProperty(window,h,{configurable:!0,value:!0}),document.body.style.zoom=1.0001,document.body.offsetHeight,document.body.style.zoom=1,window.addEventListener("message",(({data:t,origin:e})=>{if(e===window.origin)try{if(t&&"string"==typeof t&&t.startsWith(c)){const[,e]=t.split(","),i=Number.parseFloat(e);Number.isNaN(i)||(m=i)}}catch(t){console.error(t)}})));let n=!1;Array.from(e.querySelectorAll("svg[data-marpit-svg]"),(t=>{var e,s,r,o;t.style.transform||(t.style.transform="translateZ(0)");const a=i||m||t.currentScale||1;p!==a&&(p=a,n=a);const l=t.getBoundingClientRect(),{length:c}=t.children;for(let i=0;i<c;i+=1){const n=t.children[i];if(n.getScreenCTM){const t=n.getScreenCTM();if(t){const i=null!==(s=null===(e=n.x)||void 0===e?void 0:e.baseVal.value)&&void 0!==s?s:0,c=null!==(o=null===(r=n.y)||void 0===r?void 0:r.baseVal.value)&&void 0!==o?o:0,d=n.children.length;for(let e=0;e<d;e+=1){const s=n.children[e];if("SECTION"===s.tagName){const{style:e}=s;e.transformOrigin||(e.transformOrigin=`${-i}px ${-c}px`),e.transform=`scale(${a}) matrix(${t.a}, ${t.b}, ${t.c}, ${t.d}, ${t.e-l.left}, ${t.f-l.top}) translateZ(0.0001px)`;break}}}}}})),!1!==n&&Array.from(e.querySelectorAll("iframe"),(({contentWindow:t})=>{null==t||t.postMessage(`${c}${n}`,"null"===window.origin?"*":window.origin)}))}function v({once:t=!1,target:e=document}={}){const i=function(t=document){if(t[d])return t[d];let e=!0;const i=()=>{e=!1,delete t[d]};Object.defineProperty(t,d,{configurable:!0,value:i});let n=[],s=!1;(async()=>{try{n=await g()}finally{s=!0}})();const r=()=>{for(const e of n)e({target:t});s&&0===n.length||e&&window.requestAnimationFrame(r)};return r(),i}(e);return t?(i(),()=>{}):i}p=1,m=void 0;const w=Symbol(),b=(e=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(((e=document)=>{const i=window[a];i||customElements.define("marp-auto-scaling",s);for(const n of Object.keys(t)){const s=`marp-${n}`,a=t[n].proto();(o??(o=!!document.createElement("div",{is:"marp-auto-scaling"}).outerHTML.startsWith("<div is"),o))&&a!==HTMLElement?i||customElements.define(s,r(a,{style:t[n].style}),{extends:n}):(i||customElements.define(s,r(HTMLElement,t[n])),e.querySelectorAll(`${n}[is="${s}"]`).forEach((t=>{t.outerHTML=t.outerHTML.replace(new RegExp(`^<${n}`,"i"),`<${s}`).replace(new RegExp(`</${n}>$`,"i"),`</${s}>`)})))}window[a]=!0})(e),e[w])return e[w];const i=v({target:e}),n=()=>{i(),delete e[w]},l=Object.assign(n,{cleanup:n,update:()=>b(e)});return Object.defineProperty(e,w,{configurable:!0,value:l}),l},y=document.currentScript;b(y?y.getRootNode():document)}();
</script></foreignObject></svg></div><script>/*!! License: https://unpkg.com/@marp-team/marp-cli@4.0.3/lib/bespoke.js.LICENSE.txt */
!function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t,n,r=(n||(n=1,t={from:function(e,t){var n,r=1===(e.parent||e).nodeType?e.parent||e:document.querySelector(e.parent||e),o=[].filter.call("string"==typeof e.slides?r.querySelectorAll(e.slides):e.slides||r.children,(function(e){return"SCRIPT"!==e.nodeName})),a={},i=function(e,t){return(t=t||{}).index=o.indexOf(e),t.slide=e,t},s=function(e,t){a[e]=(a[e]||[]).filter((function(e){return e!==t}))},c=function(e,t){return(a[e]||[]).reduce((function(e,n){return e&&!1!==n(t)}),!0)},l=function(e,t){o[e]&&(n&&c("deactivate",i(n,t)),n=o[e],c("activate",i(n,t)))},d=function(e,t){var r=o.indexOf(n)+e;c(e>0?"next":"prev",i(n,t))&&l(r,t)},u={off:s,on:function(e,t){return(a[e]||(a[e]=[])).push(t),s.bind(null,e,t)},fire:c,slide:function(e,t){if(!arguments.length)return o.indexOf(n);c("slide",i(o[e],t))&&l(e,t)},next:d.bind(null,1),prev:d.bind(null,-1),parent:r,slides:o,destroy:function(e){c("destroy",i(n,e)),a={}}};return(t||[]).forEach((function(e){e(u)})),n||l(0),u}}),t),o=e(r);const a=document.body,i=(...e)=>history.replaceState(...e),s="",c="presenter",l="next",d=["",c,l],u="bespoke-marp-",f=`data-${u}`,m=(e,{protocol:t,host:n,pathname:r,hash:o}=location)=>{const a=e.toString();return`${t}//${n}${r}${a?"?":""}${a}${o}`},g=()=>a.dataset.bespokeView,p=e=>new URLSearchParams(location.search).get(e),v=(e,t={})=>{const n={location,setter:i,...t},r=new URLSearchParams(n.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?r.set(t,n):r.delete(t)}try{n.setter({...window.history.state??{}},"",m(r,n.location))}catch(e){console.error(e)}},h=(()=>{const e="bespoke-marp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}})(),y=e=>{try{return localStorage.getItem(e)}catch{return null}},b=(e,t)=>{try{return localStorage.setItem(e,t),!0}catch{return!1}},w=e=>{try{return localStorage.removeItem(e),!0}catch{return!1}},x=(e,t)=>{const n="aria-hidden";t?e.setAttribute(n,"true"):e.removeAttribute(n)},k=e=>{e.parent.classList.add(`${u}parent`),e.slides.forEach((e=>e.classList.add(`${u}slide`))),e.on("activate",(t=>{const n=`${u}active`,r=t.slide,o=r.classList,a=!o.contains(n);if(e.slides.forEach((e=>{e.classList.remove(n),x(e,!0)})),o.add(n),x(r,!1),a){const e=`${n}-ready`;o.add(e),document.body.clientHeight,o.remove(e)}}))},$=e=>{let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map((e=>[null,...e.querySelectorAll("[data-marpit-fragment]")]))});const r=r=>void 0!==e.fragments[t][n+r],o=(r,o)=>{t=r,n=o,e.fragments.forEach(((e,t)=>{e.forEach(((e,n)=>{if(null==e)return;const a=t<r||t===r&&n<=o;e.setAttribute(`${f}fragment`,(a?"":"in")+"active");const i=`${f}current-fragment`;t===r&&n===o?e.setAttribute(i,"current"):e.removeAttribute(i)}))})),e.fragmentIndex=o;const a={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:o};e.fire("fragment",a)};e.on("next",(({fragment:a=!0})=>{if(a){if(r(1))return o(t,n+1),!1;const a=t+1;e.fragments[a]&&o(a,0)}else{const r=e.fragments[t].length;if(n+1<r)return o(t,r-1),!1;const a=e.fragments[t+1];a&&o(t+1,a.length-1)}})),e.on("prev",(({fragment:a=!0})=>{if(r(-1)&&a)return o(t,n-1),!1;const i=t-1;e.fragments[i]&&o(i,e.fragments[i].length-1)})),e.on("slide",(({index:t,fragment:n})=>{let r=0;if(void 0!==n){const o=e.fragments[t];if(o){const{length:e}=o;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}o(t,r)})),o(0,0)},E=document,L=()=>!(!E.fullscreenEnabled&&!E.webkitFullscreenEnabled),S=()=>!(!E.fullscreenElement&&!E.webkitFullscreenElement),P=e=>{e.fullscreen=()=>{L()&&(async()=>{S()?(E.exitFullscreen||E.webkitExitFullscreen)?.call(E):((e=E.body)=>{(e.requestFullscreen||e.webkitRequestFullscreen)?.call(e)})()})()},document.addEventListener("keydown",(t=>{"f"!==t.key&&"F11"!==t.key||t.altKey||t.ctrlKey||t.metaKey||!L()||(e.fullscreen(),t.preventDefault())}))},_=`${u}inactive`,T=(e=2e3)=>({parent:t,fire:n})=>{const r=t.classList,o=e=>n(`marp-${e?"":"in"}active`);let a;const i=()=>{a&&clearTimeout(a),a=setTimeout((()=>{r.add(_),o()}),e),r.contains(_)&&(r.remove(_),o(!0))};for(const e of["mousedown","mousemove","touchend"])document.addEventListener(e,i);setTimeout(i,0)},I=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"],M=e=>{e.parent.addEventListener("keydown",(e=>{if(!e.target)return;const t=e.target;(I.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()}))},O=e=>{window.addEventListener("load",(()=>{for(const t of e.slides){const e=t.querySelector("marp-auto-scaling, [data-auto-scaling], [data-marp-fitting]");t.setAttribute(`${f}load`,e?"":"hideable")}}))},A=({interval:e=250}={})=>t=>{document.addEventListener("keydown",(e=>{if(" "===e.key&&e.shiftKey)t.prev();else if("ArrowLeft"===e.key||"ArrowUp"===e.key||"PageUp"===e.key)t.prev({fragment:!e.shiftKey});else if(" "!==e.key||e.shiftKey)if("ArrowRight"===e.key||"ArrowDown"===e.key||"PageDown"===e.key)t.next({fragment:!e.shiftKey});else if("End"===e.key)t.slide(t.slides.length-1,{fragment:-1});else{if("Home"!==e.key)return;t.slide(0)}else t.next();e.preventDefault()}));let n,r,o=0;t.parent.addEventListener("wheel",(a=>{let i=!1;const s=(e,t)=>{e&&(i=i||((e,t)=>((e,t)=>{const n="X"===t?"Width":"Height";return e[`client${n}`]<e[`scroll${n}`]})(e,t)&&((e,t)=>{const{overflow:n}=e,r=e[`overflow${t}`];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r})(getComputedStyle(e),t))(e,t)),e?.parentElement&&s(e.parentElement,t)};if(0!==a.deltaX&&s(a.target,"X"),0!==a.deltaY&&s(a.target,"Y"),i)return;a.preventDefault();const c=Math.sqrt(a.deltaX**2+a.deltaY**2);if(void 0!==a.wheelDelta){if(void 0===a.webkitForce&&Math.abs(a.wheelDelta)<40)return;if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<4)return}else if(a.deltaMode===a.DOM_DELTA_PIXEL&&c<12)return;r&&clearTimeout(r),r=setTimeout((()=>{n=0}),e);const l=Date.now()-o<e,d=c<=n;if(n=c,l||d)return;let u;(a.deltaX>0||a.deltaY>0)&&(u="next"),(a.deltaX<0||a.deltaY<0)&&(u="prev"),u&&(t[u](),o=Date.now())}))},C=(e=`.${u}osc`)=>{const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[${f}osc=${JSON.stringify(e)}]`).forEach(n)};return L()||n("fullscreen",(e=>e.style.display="none")),h||n("presenter",(e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."})),e=>{t.addEventListener("click",(t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;n&&t.target.blur();const r={fragment:!t.shiftKey};"next"===n?e.next(r):"prev"===n?e.prev(r):"fullscreen"===n?e?.fullscreen():"presenter"===n&&e.openPresenterView()}})),e.parent.appendChild(t),e.on("activate",(({index:t})=>{n("page",(n=>n.textContent=`Page ${t+1} of ${e.slides.length}`))})),e.on("fragment",(({index:t,fragments:r,fragmentIndex:o})=>{n("prev",(e=>e.disabled=0===t&&0===o)),n("next",(n=>n.disabled=t===e.slides.length-1&&o===r.length-1))})),e.on("marp-active",(()=>x(t,!1))),e.on("marp-inactive",(()=>x(t,!0))),L()&&(e=>{for(const t of["","webkit"])E.addEventListener(t+"fullscreenchange",e)})((()=>n("fullscreen",(e=>e.classList.toggle("exit",L()&&S())))))}},D=e=>{window.addEventListener("message",(t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let o=Number.parseInt(t,10),a=Number.parseInt(n,10)+1;a>=e.fragments[o].length&&(o+=1,a=0),e.slide(o,{fragment:a})}}))};var N,B,q,K,j,F,V,U={exports:{}},X=(N||(N=1,U.exports=(B=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],q=function(e){return String(e).replace(/[&<>"']/g,(function(e){return"&"+K[e]+";"}))},K={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},j="dangerouslySetInnerHTML",F={className:"class",htmlFor:"for"},V={},function(e,t){var n=[],r="";t=t||{};for(var o=arguments.length;o-- >2;)n.push(arguments[o]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(var a in t)!1!==t[a]&&null!=t[a]&&a!==j&&(r+=" "+(F[a]?F[a]:q(a))+'="'+q(t[a])+'"');r+=">"}if(-1===B.indexOf(e)){if(t[j])r+=t[j].__html;else for(;n.length;){var i=n.pop();if(i)if(i.pop)for(var s=i.length;s--;)n.push(i[s]);else r+=!0===V[i]?i:q(i)}r+=e?"</"+e+">":""}return V[r]=!0,r})),U.exports),H=e(X);const R=({children:e})=>H(null,null,...e),W=`${u}presenter-`,J={container:`${W}container`,dragbar:`${W}dragbar-container`,next:`${W}next`,nextContainer:`${W}next-container`,noteContainer:`${W}note-container`,noteWrapper:`${W}note-wrapper`,noteButtons:`${W}note-buttons`,infoContainer:`${W}info-container`,infoPage:`${W}info-page`,infoPageText:`${W}info-page-text`,infoPagePrev:`${W}info-page-prev`,infoPageNext:`${W}info-page-next`,noteButtonsBigger:`${W}note-bigger`,noteButtonsSmaller:`${W}note-smaller`,infoTime:`${W}info-time`,infoTimer:`${W}info-timer`},Y=e=>{const{title:t}=document;document.title="[Presenter view]"+(t?` - ${t}`:"");const n={},r=e=>(n[e]=n[e]||document.querySelector(`.${e}`),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=J.container,t.appendChild(e),t.insertAdjacentHTML("beforeend",H(R,null,H("div",{class:J.nextContainer},H("iframe",{class:J.next,src:"?view=next"})),H("div",{class:J.dragbar}),H("div",{class:J.noteContainer},H("div",{class:J.noteWrapper}),H("div",{class:J.noteButtons},H("button",{class:J.noteButtonsSmaller,tabindex:"-1",title:"Smaller notes font size"},"Smaller notes font size"),H("button",{class:J.noteButtonsBigger,tabindex:"-1",title:"Bigger notes font size"},"Bigger notes font size"))),H("div",{class:J.infoContainer},H("div",{class:J.infoPage},H("button",{class:J.infoPagePrev,tabindex:"-1",title:"Previous"},"Previous"),H("span",{class:J.infoPageText}),H("button",{class:J.infoPageNext,tabindex:"-1",title:"Next"},"Next")),H("time",{class:J.infoTime,title:"Current time"}),H("time",{class:J.infoTimer,title:"Timer"})))),t})(e.parent)),(e=>{let t=!1;r(J.dragbar).addEventListener("mousedown",(()=>{t=!0,r(J.dragbar).classList.add("active")})),window.addEventListener("mouseup",(()=>{t=!1,r(J.dragbar).classList.remove("active")})),window.addEventListener("mousemove",(e=>{if(!t)return;const n=e.clientX/document.documentElement.clientWidth*100;r(J.container).style.setProperty("--bespoke-marp-presenter-split-ratio",`${Math.max(0,Math.min(100,n))}%`)})),r(J.nextContainer).addEventListener("click",(()=>e.next()));const n=r(J.next),o=(a=n,(e,t)=>a.contentWindow?.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin));var a;n.addEventListener("load",(()=>{r(J.nextContainer).classList.add("active"),o(e.slide(),e.fragmentIndex),e.on("fragment",(({index:e,fragmentIndex:t})=>o(e,t)))}));const i=document.querySelectorAll(".bespoke-marp-note");i.forEach((e=>{e.addEventListener("keydown",(e=>e.stopPropagation())),r(J.noteWrapper).appendChild(e)})),e.on("activate",(()=>i.forEach((t=>t.classList.toggle("active",t.dataset.index==e.slide())))));let s=0;const c=e=>{s=Math.max(-5,s+e),r(J.noteContainer).style.setProperty("--bespoke-marp-note-font-scale",(1.2**s).toFixed(4))},l=()=>c(1),d=()=>c(-1),u=r(J.noteButtonsBigger),f=r(J.noteButtonsSmaller);u.addEventListener("click",(()=>{u.blur(),l()})),f.addEventListener("click",(()=>{f.blur(),d()})),document.addEventListener("keydown",(e=>{"+"===e.key&&l(),"-"===e.key&&d()}),!0),e.on("activate",(({index:t})=>{r(J.infoPageText).textContent=`${t+1} / ${e.slides.length}`}));const m=r(J.infoPagePrev),g=r(J.infoPageNext);m.addEventListener("click",(t=>{m.blur(),e.prev({fragment:!t.shiftKey})})),g.addEventListener("click",(t=>{g.blur(),e.next({fragment:!t.shiftKey})})),e.on("fragment",(({index:t,fragments:n,fragmentIndex:r})=>{m.disabled=0===t&&0===r,g.disabled=t===e.slides.length-1&&r===n.length-1}));let p=new Date;const v=()=>{const e=new Date,t=e=>`${Math.floor(e)}`.padStart(2,"0"),n=e.getTime()-p.getTime(),o=t(n/1e3%60),a=t(n/1e3/60%60),i=t(n/36e5%24);r(J.infoTime).textContent=e.toLocaleTimeString(),r(J.infoTimer).textContent=`${i}:${a}:${o}`};v(),setInterval(v,250),r(J.infoTimer).addEventListener("click",(()=>{p=new Date}))})(e)},z=e=>{if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:G},presenterUrl:{enumerable:!0,get:Q}}),h&&document.addEventListener("keydown",(t=>{"p"!==t.key||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())}))};function G(){const{max:e,floor:t}=Math,n=e(t(.85*window.innerWidth),640),r=e(t(.85*window.innerHeight),360);return window.open(this.presenterUrl,W+this.syncKey,`width=${n},height=${r},menubar=no,toolbar=no`)}function Q(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),m(e)}const Z=e=>{const t=g();return t===l&&e.appendChild(document.createElement("span")),{[s]:z,[c]:Y,[l]:D}[t]},ee=e=>{e.on("activate",(t=>{document.querySelectorAll(".bespoke-progress-parent > .bespoke-progress-bar").forEach((n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"}))}))},te=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t},ne=(e={})=>{const t={history:!0,...e};return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},o=(t={fragment:!0})=>{let n=t.fragment?te(p("f")||""):null;((t,n)=>{const{min:r,max:o}=Math,{fragments:a,slides:i}=e,s=o(0,r(t,i.length-1)),c=o(0,r(n||0,a[s].length-1));s===e.slide()&&c===e.fragmentIndex||e.slide(s,{fragment:c})})((()=>{if(location.hash){const[t]=location.hash.slice(1).split(":~:");if(/^\d+$/.test(t))return(te(t)??1)-1;const r=document.getElementById(t)||document.querySelector(`a[name="${CSS.escape(t)}"]`);if(r){const{length:t}=e.slides;for(let o=0;o<t;o+=1)if(e.slides[o].contains(r)){const t=e.fragments?.[o],a=r.closest("[data-marpit-fragment]");if(t&&a){const e=t.indexOf(a);e>=0&&(n=e)}return o}}}return 0})(),n)};e.on("fragment",(({index:e,fragmentIndex:r})=>{n||v({f:0===r||r.toString()},{location:{...location,hash:`#${e+1}`},setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})})),setTimeout((()=>{o(),window.addEventListener("hashchange",(()=>r((()=>{o({fragment:!1}),v({f:void 0})})))),window.addEventListener("popstate",(()=>{n||r((()=>o()))})),n=!1}),0)}},re=(e={})=>{const t=e.key||window.history.state?.marpBespokeSyncKey||Math.random().toString(36).slice(2),n=`bespoke-marp-sync-${t}`;var r;r={marpBespokeSyncKey:t},v({},{setter:(e,...t)=>i({...e,...r},...t)});const o=()=>{const e=y(n);return e?JSON.parse(e):Object.create(null)},a=e=>{const t=o(),r={...t,...e(t)};return b(n,JSON.stringify(r)),r},s=()=>{window.removeEventListener("pageshow",s),a((e=>({reference:(e.reference||0)+1})))};return e=>{s(),Object.defineProperty(e,"syncKey",{value:t,enumerable:!0});let r=!0;setTimeout((()=>{e.on("fragment",(e=>{r&&a((()=>({index:e.index,fragmentIndex:e.fragmentIndex})))}))}),0),window.addEventListener("storage",(t=>{if(t.key===n&&t.oldValue&&t.newValue){const n=JSON.parse(t.oldValue),o=JSON.parse(t.newValue);if(n.index!==o.index||n.fragmentIndex!==o.fragmentIndex)try{r=!1,e.slide(o.index,{fragment:o.fragmentIndex,forSync:!0})}finally{r=!0}}}));const i=()=>{const{reference:e}=o();void 0===e||e<=1?w(n):a((()=>({reference:e-1})))};window.addEventListener("pagehide",(e=>{e.persisted&&window.addEventListener("pageshow",s),i()})),e.on("destroy",i)}},{PI:oe,abs:ae,sqrt:ie,atan2:se}=Math,ce={passive:!0},le=({slope:e=-.7,swipeThreshold:t=30}={})=>n=>{let r;const o=n.parent,a=e=>{const t=o.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};o.addEventListener("touchstart",(({touches:e})=>{r=1===e.length?a(e[0]):void 0}),ce),o.addEventListener("touchmove",(e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=a(e.touches[0]),n=t.x-r.x,o=t.y-r.y;r.delta=ie(ae(n)**2+ae(o)**2),r.radian=se(n,o)}else r=void 0})),o.addEventListener("touchend",(o=>{if(r){if(r.delta&&r.delta>=t&&r.radian){const t=(r.radian-e+oe)%(2*oe)-oe;n[t<0?"next":"prev"](),o.stopPropagation()}r=void 0}}),ce)},de=new Map;de.clear(),de.set("none",{backward:{both:void 0,incoming:void 0,outgoing:void 0},forward:{both:void 0,incoming:void 0,outgoing:void 0}});const ue={both:"",outgoing:"outgoing-",incoming:"incoming-"},fe={forward:"",backward:"-backward"},me=e=>`--marp-bespoke-transition-animation-${e}`,ge=e=>`--marp-transition-${e}`,pe=me("name"),ve=me("duration"),he=e=>new Promise((t=>{const n={},r=document.createElement("div"),o=e=>{r.remove(),t(e)};r.addEventListener("animationstart",(()=>o(n))),Object.assign(r.style,{animationName:e,animationDuration:"1s",animationFillMode:"both",animationPlayState:"paused",position:"absolute",pointerEvents:"none"}),document.body.appendChild(r);const a=getComputedStyle(r).getPropertyValue(ge("duration"));a&&(n.defaultDuration=a),((e,t)=>{requestAnimationFrame((()=>{e.style.animationPlayState="running",requestAnimationFrame((()=>t(void 0)))}))})(r,o)})),ye=async e=>de.has(e)?de.get(e):(e=>{const t={},n=[];for(const[r,o]of Object.entries(ue))for(const[a,i]of Object.entries(fe)){const s=`marp-${o}transition${i}-${e}`;n.push(he(s).then((e=>{t[a]=t[a]||{},t[a][r]=e?{...e,name:s}:void 0})))}return Promise.all(n).then((()=>t))})(e).then((t=>(de.set(e,t),t))),be=e=>Object.values(e).flatMap(Object.values).every((e=>!e)),we=(e,{type:t,backward:n})=>{const r=e[n?"backward":"forward"],o=(()=>{const e=r[t],n=e=>({[pe]:e.name});if(e)return n(e);if(r.both){const e=n(r.both);return"incoming"===t&&(e[me("direction")]="reverse"),e}})();return!o&&n?we(e,{type:t,backward:!1}):o||{[pe]:"__bespoke_marp_transition_no_animation__"}},xe=e=>{if(e)try{const t=JSON.parse(e);if((e=>{if("object"!=typeof e)return!1;const t=e;return"string"==typeof t.name&&(void 0===t.duration||"string"==typeof t.duration)})(t))return t}catch{}},ke="_tSId",$e="_tA",Ee="bespoke-marp-transition-warming-up",Le=window.matchMedia("(prefers-reduced-motion: reduce)"),Se="__bespoke_marp_transition_reduced_outgoing__",Pe="__bespoke_marp_transition_reduced_incoming__",_e={forward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}},backward:{both:void 0,incoming:{name:Pe},outgoing:{name:Se}}},Te=e=>{if(!document.startViewTransition)return;const t=t=>(void 0!==t&&(e._tD=t),e._tD);let n;t(!1),((...e)=>{const t=[...new Set(e).values()];return Promise.all(t.map((e=>ye(e)))).then()})(...Array.from(document.querySelectorAll("section[data-transition], section[data-transition-back]")).flatMap((e=>[e.dataset.transition,e.dataset.transitionBack].flatMap((e=>{const t=xe(e);return[t?.name,t?.builtinFallback?`__builtin__${t.name}`:void 0]})).filter((e=>!!e))))).then((()=>{document.querySelectorAll("style").forEach((e=>{e.innerHTML=e.innerHTML.replace(/--marp-transition-duration:[^;}]*[;}]/g,(e=>e.slice(0,-1)+"!important"+e.slice(-1)))}))}));const r=(n,{back:r,cond:o})=>a=>{const i=t();if(i)return!!a[$e]||!("object"!=typeof i||(i.skipTransition(),!a.forSync));if(!o(a))return!0;const s=e.slides[e.slide()],c=()=>a.back??r,l="data-transition"+(c()?"-back":""),d=s.querySelector(`section[${l}]`);if(!d)return!0;const u=xe(d.getAttribute(l)??void 0);return!u||((async(e,{builtinFallback:t=!0}={})=>{let n=await ye(e);if(be(n)){if(!t)return;return n=await ye(`__builtin__${e}`),be(n)?void 0:n}return n})(u.name,{builtinFallback:u.builtinFallback}).then((e=>{if(!e){t(!0);try{n(a)}finally{t(!1)}return}let r=e;Le.matches&&(console.warn("Use a constant animation to transition because preferring reduced motion by viewer has detected."),r=_e);const o=document.getElementById(ke);o&&o.remove();const i=document.createElement("style");i.id=ke,document.head.appendChild(i),((e,t)=>{const n=[`:root{${ge("direction")}:${t.backward?-1:1};}`,":root:has(.bespoke-marp-inactive){cursor:none;}"],r=t=>{const n=e[t].both?.defaultDuration||e[t].outgoing?.defaultDuration||e[t].incoming?.defaultDuration;return"forward"===t?n:n||r("forward")},o=t.duration||r(t.backward?"backward":"forward");void 0!==o&&n.push(`::view-transition-group(*){${ve}:${o};}`);const a=e=>Object.entries(e).map((([e,t])=>`${e}:${t};`)).join("");return n.push(`::view-transition-old(root){${a(we(e,{...t,type:"outgoing"}))}}`,`::view-transition-new(root){${a(we(e,{...t,type:"incoming"}))}}`),n})(r,{backward:c(),duration:u.duration}).forEach((e=>i.sheet?.insertRule(e)));const s=document.documentElement.classList;s.add(Ee);let l=!1;const d=()=>{l||(n(a),l=!0,s.remove(Ee))},f=()=>{t(!1),i.remove(),s.remove(Ee)};try{t(!0);const e=document.startViewTransition(d);t(e),e.finished.finally(f)}catch(e){console.error(e),d(),f()}})),!1)};e.on("prev",r((t=>e.prev({...t,[$e]:!0})),{back:!0,cond:e=>e.index>0&&!((e.fragment??1)&&n.fragmentIndex>0)})),e.on("next",r((t=>e.next({...t,[$e]:!0})),{cond:t=>t.index+1<e.slides.length&&!(n.fragmentIndex+1<n.fragments.length)})),setTimeout((()=>{e.on("slide",r((t=>e.slide(t.index,{...t,[$e]:!0})),{cond:t=>{const n=e.slide();return t.index!==n&&(t.back=t.index<n,!0)}}))}),0),e.on("fragment",(e=>{n=e}))};let Ie;const Me=()=>(void 0===Ie&&(Ie="wakeLock"in navigator&&navigator.wakeLock),Ie),Oe=async()=>{const e=Me();if(e)try{return await e.request("screen")}catch(e){console.warn(e)}return null},Ae=async()=>{if(!Me())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&Oe()};for(const e of["visibilitychange","fullscreenchange"])document.addEventListener(e,t);return e=await Oe(),e};((e=document.getElementById(":$p"))=>{(()=>{const e=p("view");a.dataset.bespokeView=e===l||e===c?e:""})();const t=(e=>{const t=p(e);return v({[e]:void 0}),t})("sync")||void 0;o.from(e,((...e)=>{const t=d.findIndex((e=>g()===e));return e.map((([e,n])=>e[t]&&n)).filter((e=>e))})([[1,1,0],re({key:t})],[[1,1,1],Z(e)],[[1,1,0],M],[[1,1,1],k],[[1,0,0],T()],[[1,1,1],O],[[1,1,1],ne({history:!1})],[[1,1,0],A()],[[1,1,0],P],[[1,0,0],ee],[[1,1,0],le()],[[1,0,0],C()],[[1,0,0],Te],[[1,1,1],$],[[1,1,0],Ae]))})()}();</script></body></html>